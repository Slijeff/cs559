"use strict";(()=>{var Er=Object.defineProperty;var K=(r,e)=>{for(var n in e)Er(r,n,{get:e[n],enumerable:!0})};function $(){let r=document.getElementById("myCanvas"),e=r.getContext("webgl");return{canvas:r,gl:e}}var o=new Float32Array([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1]),o1=new Float32Array([.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5]),u=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1]),G=new Uint8Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]);var w=1e-6,O=typeof Float32Array!="undefined"?Float32Array:Array;var re=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var F={};K(F,{add:()=>Xr,adjoint:()=>Or,clone:()=>Sr,copy:()=>wr,create:()=>W,determinant:()=>Br,equals:()=>Jr,exactEquals:()=>jr,frob:()=>kr,fromMat2d:()=>Vr,fromMat4:()=>zr,fromQuat:()=>Ur,fromRotation:()=>Dr,fromScaling:()=>Cr,fromTranslation:()=>Fr,fromValues:()=>Lr,identity:()=>Ir,invert:()=>Nr,mul:()=>Kr,multiply:()=>rr,multiplyScalar:()=>Zr,multiplyScalarAndAdd:()=>Qr,normalFromMat4:()=>Gr,projection:()=>Wr,rotate:()=>qr,scale:()=>br,set:()=>Tr,str:()=>Hr,sub:()=>$r,subtract:()=>er,translate:()=>_r,transpose:()=>Yr});function W(){var r=new O(9);return O!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function zr(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r}function Sr(r){var e=new O(9);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function wr(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function Lr(r,e,n,a,i,t,s,v,x){var h=new O(9);return h[0]=r,h[1]=e,h[2]=n,h[3]=a,h[4]=i,h[5]=t,h[6]=s,h[7]=v,h[8]=x,h}function Tr(r,e,n,a,i,t,s,v,x,h){return r[0]=e,r[1]=n,r[2]=a,r[3]=i,r[4]=t,r[5]=s,r[6]=v,r[7]=x,r[8]=h,r}function Ir(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Yr(r,e){if(r===e){var n=e[1],a=e[2],i=e[5];r[1]=e[3],r[2]=e[6],r[3]=n,r[5]=e[7],r[6]=a,r[7]=i}else r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8];return r}function Nr(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=e[6],h=e[7],c=e[8],p=c*s-v*h,l=-c*t+v*x,f=h*t-s*x,g=n*p+a*l+i*f;return g?(g=1/g,r[0]=p*g,r[1]=(-c*a+i*h)*g,r[2]=(v*a-i*s)*g,r[3]=l*g,r[4]=(c*n-i*x)*g,r[5]=(-v*n+i*t)*g,r[6]=f*g,r[7]=(-h*n+a*x)*g,r[8]=(s*n-a*t)*g,r):null}function Or(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=e[6],h=e[7],c=e[8];return r[0]=s*c-v*h,r[1]=i*h-a*c,r[2]=a*v-i*s,r[3]=v*x-t*c,r[4]=n*c-i*x,r[5]=i*t-n*v,r[6]=t*h-s*x,r[7]=a*x-n*h,r[8]=n*s-a*t,r}function Br(r){var e=r[0],n=r[1],a=r[2],i=r[3],t=r[4],s=r[5],v=r[6],x=r[7],h=r[8];return e*(h*t-s*x)+n*(-h*i+s*v)+a*(x*i-t*v)}function rr(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],h=e[6],c=e[7],p=e[8],l=n[0],f=n[1],g=n[2],m=n[3],M=n[4],y=n[5],P=n[6],A=n[7],d=n[8];return r[0]=l*a+f*s+g*h,r[1]=l*i+f*v+g*c,r[2]=l*t+f*x+g*p,r[3]=m*a+M*s+y*h,r[4]=m*i+M*v+y*c,r[5]=m*t+M*x+y*p,r[6]=P*a+A*s+d*h,r[7]=P*i+A*v+d*c,r[8]=P*t+A*x+d*p,r}function _r(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],h=e[6],c=e[7],p=e[8],l=n[0],f=n[1];return r[0]=a,r[1]=i,r[2]=t,r[3]=s,r[4]=v,r[5]=x,r[6]=l*a+f*s+h,r[7]=l*i+f*v+c,r[8]=l*t+f*x+p,r}function qr(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],h=e[6],c=e[7],p=e[8],l=Math.sin(n),f=Math.cos(n);return r[0]=f*a+l*s,r[1]=f*i+l*v,r[2]=f*t+l*x,r[3]=f*s-l*a,r[4]=f*v-l*i,r[5]=f*x-l*t,r[6]=h,r[7]=c,r[8]=p,r}function br(r,e,n){var a=n[0],i=n[1];return r[0]=a*e[0],r[1]=a*e[1],r[2]=a*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function Fr(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=e[0],r[7]=e[1],r[8]=1,r}function Dr(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=n,r[2]=0,r[3]=-n,r[4]=a,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Cr(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=e[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Vr(r,e){return r[0]=e[0],r[1]=e[1],r[2]=0,r[3]=e[2],r[4]=e[3],r[5]=0,r[6]=e[4],r[7]=e[5],r[8]=1,r}function Ur(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=n+n,v=a+a,x=i+i,h=n*s,c=a*s,p=a*v,l=i*s,f=i*v,g=i*x,m=t*s,M=t*v,y=t*x;return r[0]=1-p-g,r[3]=c-y,r[6]=l+M,r[1]=c+y,r[4]=1-h-g,r[7]=f-m,r[2]=l-M,r[5]=f+m,r[8]=1-h-p,r}function Gr(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=e[6],h=e[7],c=e[8],p=e[9],l=e[10],f=e[11],g=e[12],m=e[13],M=e[14],y=e[15],P=n*v-a*s,A=n*x-i*s,d=n*h-t*s,R=a*x-i*v,E=a*h-t*v,T=i*h-t*x,L=c*m-p*g,I=c*M-l*g,z=c*y-f*g,B=p*M-l*m,Y=p*y-f*m,N=l*y-f*M,S=P*N-A*Y+d*B+R*z-E*I+T*L;return S?(S=1/S,r[0]=(v*N-x*Y+h*B)*S,r[1]=(x*z-s*N-h*I)*S,r[2]=(s*Y-v*z+h*L)*S,r[3]=(i*Y-a*N-t*B)*S,r[4]=(n*N-i*z+t*I)*S,r[5]=(a*z-n*Y-t*L)*S,r[6]=(m*T-M*E+y*R)*S,r[7]=(M*d-g*T-y*A)*S,r[8]=(g*E-m*d+y*P)*S,r):null}function Wr(r,e,n){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/n,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}function Hr(r){return"mat3("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+")"}function kr(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])}function Xr(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r[6]=e[6]+n[6],r[7]=e[7]+n[7],r[8]=e[8]+n[8],r}function er(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r[4]=e[4]-n[4],r[5]=e[5]-n[5],r[6]=e[6]-n[6],r[7]=e[7]-n[7],r[8]=e[8]-n[8],r}function Zr(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r[6]=e[6]*n,r[7]=e[7]*n,r[8]=e[8]*n,r}function Qr(r,e,n,a){return r[0]=e[0]+n[0]*a,r[1]=e[1]+n[1]*a,r[2]=e[2]+n[2]*a,r[3]=e[3]+n[3]*a,r[4]=e[4]+n[4]*a,r[5]=e[5]+n[5]*a,r[6]=e[6]+n[6]*a,r[7]=e[7]+n[7]*a,r[8]=e[8]+n[8]*a,r}function jr(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]}function Jr(r,e){var n=r[0],a=r[1],i=r[2],t=r[3],s=r[4],v=r[5],x=r[6],h=r[7],c=r[8],p=e[0],l=e[1],f=e[2],g=e[3],m=e[4],M=e[5],y=e[6],P=e[7],A=e[8];return Math.abs(n-p)<=w*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(a-l)<=w*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-f)<=w*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(t-g)<=w*Math.max(1,Math.abs(t),Math.abs(g))&&Math.abs(s-m)<=w*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(v-M)<=w*Math.max(1,Math.abs(v),Math.abs(M))&&Math.abs(x-y)<=w*Math.max(1,Math.abs(x),Math.abs(y))&&Math.abs(h-P)<=w*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(c-A)<=w*Math.max(1,Math.abs(c),Math.abs(A))}var Kr=rr,$r=er;var _={};K(_,{add:()=>q1,adjoint:()=>t1,clone:()=>ur,copy:()=>r1,create:()=>or,decompose:()=>E1,determinant:()=>s1,equals:()=>C1,exactEquals:()=>D1,frob:()=>_1,fromQuat:()=>z1,fromQuat2:()=>A1,fromRotation:()=>g1,fromRotationTranslation:()=>ir,fromRotationTranslationScale:()=>R1,fromRotationTranslationScaleOrigin:()=>P1,fromScaling:()=>l1,fromTranslation:()=>p1,fromValues:()=>e1,fromXRotation:()=>m1,fromYRotation:()=>y1,fromZRotation:()=>d1,frustum:()=>S1,getRotation:()=>vr,getScaling:()=>sr,getTranslation:()=>tr,identity:()=>nr,invert:()=>i1,lookAt:()=>N1,mul:()=>V1,multiply:()=>ar,multiplyScalar:()=>b1,multiplyScalarAndAdd:()=>F1,ortho:()=>I1,orthoNO:()=>hr,orthoZO:()=>Y1,perspective:()=>w1,perspectiveFromFieldOfView:()=>T1,perspectiveNO:()=>xr,perspectiveZO:()=>L1,rotate:()=>h1,rotateX:()=>c1,rotateY:()=>f1,rotateZ:()=>M1,scale:()=>x1,set:()=>n1,str:()=>B1,sub:()=>U1,subtract:()=>cr,targetTo:()=>O1,translate:()=>v1,transpose:()=>a1});function or(){var r=new O(16);return O!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function ur(r){var e=new O(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function r1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function e1(r,e,n,a,i,t,s,v,x,h,c,p,l,f,g,m){var M=new O(16);return M[0]=r,M[1]=e,M[2]=n,M[3]=a,M[4]=i,M[5]=t,M[6]=s,M[7]=v,M[8]=x,M[9]=h,M[10]=c,M[11]=p,M[12]=l,M[13]=f,M[14]=g,M[15]=m,M}function n1(r,e,n,a,i,t,s,v,x,h,c,p,l,f,g,m,M){return r[0]=e,r[1]=n,r[2]=a,r[3]=i,r[4]=t,r[5]=s,r[6]=v,r[7]=x,r[8]=h,r[9]=c,r[10]=p,r[11]=l,r[12]=f,r[13]=g,r[14]=m,r[15]=M,r}function nr(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function a1(r,e){if(r===e){var n=e[1],a=e[2],i=e[3],t=e[6],s=e[7],v=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=n,r[6]=e[9],r[7]=e[13],r[8]=a,r[9]=t,r[11]=e[14],r[12]=i,r[13]=s,r[14]=v}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r}function i1(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=e[6],h=e[7],c=e[8],p=e[9],l=e[10],f=e[11],g=e[12],m=e[13],M=e[14],y=e[15],P=n*v-a*s,A=n*x-i*s,d=n*h-t*s,R=a*x-i*v,E=a*h-t*v,T=i*h-t*x,L=c*m-p*g,I=c*M-l*g,z=c*y-f*g,B=p*M-l*m,Y=p*y-f*m,N=l*y-f*M,S=P*N-A*Y+d*B+R*z-E*I+T*L;return S?(S=1/S,r[0]=(v*N-x*Y+h*B)*S,r[1]=(i*Y-a*N-t*B)*S,r[2]=(m*T-M*E+y*R)*S,r[3]=(l*E-p*T-f*R)*S,r[4]=(x*z-s*N-h*I)*S,r[5]=(n*N-i*z+t*I)*S,r[6]=(M*d-g*T-y*A)*S,r[7]=(c*T-l*d+f*A)*S,r[8]=(s*Y-v*z+h*L)*S,r[9]=(a*z-n*Y-t*L)*S,r[10]=(g*E-m*d+y*P)*S,r[11]=(p*d-c*E-f*P)*S,r[12]=(v*I-s*B-x*L)*S,r[13]=(n*B-a*I+i*L)*S,r[14]=(m*A-g*R-M*P)*S,r[15]=(c*R-p*A+l*P)*S,r):null}function t1(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=e[6],h=e[7],c=e[8],p=e[9],l=e[10],f=e[11],g=e[12],m=e[13],M=e[14],y=e[15],P=n*v-a*s,A=n*x-i*s,d=n*h-t*s,R=a*x-i*v,E=a*h-t*v,T=i*h-t*x,L=c*m-p*g,I=c*M-l*g,z=c*y-f*g,B=p*M-l*m,Y=p*y-f*m,N=l*y-f*M;return r[0]=v*N-x*Y+h*B,r[1]=i*Y-a*N-t*B,r[2]=m*T-M*E+y*R,r[3]=l*E-p*T-f*R,r[4]=x*z-s*N-h*I,r[5]=n*N-i*z+t*I,r[6]=M*d-g*T-y*A,r[7]=c*T-l*d+f*A,r[8]=s*Y-v*z+h*L,r[9]=a*z-n*Y-t*L,r[10]=g*E-m*d+y*P,r[11]=p*d-c*E-f*P,r[12]=v*I-s*B-x*L,r[13]=n*B-a*I+i*L,r[14]=m*A-g*R-M*P,r[15]=c*R-p*A+l*P,r}function s1(r){var e=r[0],n=r[1],a=r[2],i=r[3],t=r[4],s=r[5],v=r[6],x=r[7],h=r[8],c=r[9],p=r[10],l=r[11],f=r[12],g=r[13],m=r[14],M=r[15],y=e*s-n*t,P=e*v-a*t,A=n*v-a*s,d=h*g-c*f,R=h*m-p*f,E=c*m-p*g,T=e*E-n*R+a*d,L=t*E-s*R+v*d,I=h*A-c*P+p*y,z=f*A-g*P+m*y;return x*T-i*L+M*I-l*z}function ar(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],h=e[6],c=e[7],p=e[8],l=e[9],f=e[10],g=e[11],m=e[12],M=e[13],y=e[14],P=e[15],A=n[0],d=n[1],R=n[2],E=n[3];return r[0]=A*a+d*v+R*p+E*m,r[1]=A*i+d*x+R*l+E*M,r[2]=A*t+d*h+R*f+E*y,r[3]=A*s+d*c+R*g+E*P,A=n[4],d=n[5],R=n[6],E=n[7],r[4]=A*a+d*v+R*p+E*m,r[5]=A*i+d*x+R*l+E*M,r[6]=A*t+d*h+R*f+E*y,r[7]=A*s+d*c+R*g+E*P,A=n[8],d=n[9],R=n[10],E=n[11],r[8]=A*a+d*v+R*p+E*m,r[9]=A*i+d*x+R*l+E*M,r[10]=A*t+d*h+R*f+E*y,r[11]=A*s+d*c+R*g+E*P,A=n[12],d=n[13],R=n[14],E=n[15],r[12]=A*a+d*v+R*p+E*m,r[13]=A*i+d*x+R*l+E*M,r[14]=A*t+d*h+R*f+E*y,r[15]=A*s+d*c+R*g+E*P,r}function v1(r,e,n){var a=n[0],i=n[1],t=n[2],s,v,x,h,c,p,l,f,g,m,M,y;return e===r?(r[12]=e[0]*a+e[4]*i+e[8]*t+e[12],r[13]=e[1]*a+e[5]*i+e[9]*t+e[13],r[14]=e[2]*a+e[6]*i+e[10]*t+e[14],r[15]=e[3]*a+e[7]*i+e[11]*t+e[15]):(s=e[0],v=e[1],x=e[2],h=e[3],c=e[4],p=e[5],l=e[6],f=e[7],g=e[8],m=e[9],M=e[10],y=e[11],r[0]=s,r[1]=v,r[2]=x,r[3]=h,r[4]=c,r[5]=p,r[6]=l,r[7]=f,r[8]=g,r[9]=m,r[10]=M,r[11]=y,r[12]=s*a+c*i+g*t+e[12],r[13]=v*a+p*i+m*t+e[13],r[14]=x*a+l*i+M*t+e[14],r[15]=h*a+f*i+y*t+e[15]),r}function x1(r,e,n){var a=n[0],i=n[1],t=n[2];return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3]*a,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function h1(r,e,n,a){var i=a[0],t=a[1],s=a[2],v=Math.hypot(i,t,s),x,h,c,p,l,f,g,m,M,y,P,A,d,R,E,T,L,I,z,B,Y,N,S,q;return v<w?null:(v=1/v,i*=v,t*=v,s*=v,x=Math.sin(n),h=Math.cos(n),c=1-h,p=e[0],l=e[1],f=e[2],g=e[3],m=e[4],M=e[5],y=e[6],P=e[7],A=e[8],d=e[9],R=e[10],E=e[11],T=i*i*c+h,L=t*i*c+s*x,I=s*i*c-t*x,z=i*t*c-s*x,B=t*t*c+h,Y=s*t*c+i*x,N=i*s*c+t*x,S=t*s*c-i*x,q=s*s*c+h,r[0]=p*T+m*L+A*I,r[1]=l*T+M*L+d*I,r[2]=f*T+y*L+R*I,r[3]=g*T+P*L+E*I,r[4]=p*z+m*B+A*Y,r[5]=l*z+M*B+d*Y,r[6]=f*z+y*B+R*Y,r[7]=g*z+P*B+E*Y,r[8]=p*N+m*S+A*q,r[9]=l*N+M*S+d*q,r[10]=f*N+y*S+R*q,r[11]=g*N+P*S+E*q,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function c1(r,e,n){var a=Math.sin(n),i=Math.cos(n),t=e[4],s=e[5],v=e[6],x=e[7],h=e[8],c=e[9],p=e[10],l=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=t*i+h*a,r[5]=s*i+c*a,r[6]=v*i+p*a,r[7]=x*i+l*a,r[8]=h*i-t*a,r[9]=c*i-s*a,r[10]=p*i-v*a,r[11]=l*i-x*a,r}function f1(r,e,n){var a=Math.sin(n),i=Math.cos(n),t=e[0],s=e[1],v=e[2],x=e[3],h=e[8],c=e[9],p=e[10],l=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=t*i-h*a,r[1]=s*i-c*a,r[2]=v*i-p*a,r[3]=x*i-l*a,r[8]=t*a+h*i,r[9]=s*a+c*i,r[10]=v*a+p*i,r[11]=x*a+l*i,r}function M1(r,e,n){var a=Math.sin(n),i=Math.cos(n),t=e[0],s=e[1],v=e[2],x=e[3],h=e[4],c=e[5],p=e[6],l=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=t*i+h*a,r[1]=s*i+c*a,r[2]=v*i+p*a,r[3]=x*i+l*a,r[4]=h*i-t*a,r[5]=c*i-s*a,r[6]=p*i-v*a,r[7]=l*i-x*a,r}function p1(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function l1(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function g1(r,e,n){var a=n[0],i=n[1],t=n[2],s=Math.hypot(a,i,t),v,x,h;return s<w?null:(s=1/s,a*=s,i*=s,t*=s,v=Math.sin(e),x=Math.cos(e),h=1-x,r[0]=a*a*h+x,r[1]=i*a*h+t*v,r[2]=t*a*h-i*v,r[3]=0,r[4]=a*i*h-t*v,r[5]=i*i*h+x,r[6]=t*i*h+a*v,r[7]=0,r[8]=a*t*h+i*v,r[9]=i*t*h-a*v,r[10]=t*t*h+x,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function m1(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=n,r[7]=0,r[8]=0,r[9]=-n,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function y1(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=0,r[2]=-n,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=0,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function d1(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=n,r[2]=0,r[3]=0,r[4]=-n,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function ir(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=a+a,x=i+i,h=t+t,c=a*v,p=a*x,l=a*h,f=i*x,g=i*h,m=t*h,M=s*v,y=s*x,P=s*h;return r[0]=1-(f+m),r[1]=p+P,r[2]=l-y,r[3]=0,r[4]=p-P,r[5]=1-(c+m),r[6]=g+M,r[7]=0,r[8]=l+y,r[9]=g-M,r[10]=1-(c+f),r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function A1(r,e){var n=new O(3),a=-e[0],i=-e[1],t=-e[2],s=e[3],v=e[4],x=e[5],h=e[6],c=e[7],p=a*a+i*i+t*t+s*s;return p>0?(n[0]=(v*s+c*a+x*t-h*i)*2/p,n[1]=(x*s+c*i+h*a-v*t)*2/p,n[2]=(h*s+c*t+v*i-x*a)*2/p):(n[0]=(v*s+c*a+x*t-h*i)*2,n[1]=(x*s+c*i+h*a-v*t)*2,n[2]=(h*s+c*t+v*i-x*a)*2),ir(r,e,n),r}function tr(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function sr(r,e){var n=e[0],a=e[1],i=e[2],t=e[4],s=e[5],v=e[6],x=e[8],h=e[9],c=e[10];return r[0]=Math.hypot(n,a,i),r[1]=Math.hypot(t,s,v),r[2]=Math.hypot(x,h,c),r}function vr(r,e){var n=new O(3);sr(n,e);var a=1/n[0],i=1/n[1],t=1/n[2],s=e[0]*a,v=e[1]*i,x=e[2]*t,h=e[4]*a,c=e[5]*i,p=e[6]*t,l=e[8]*a,f=e[9]*i,g=e[10]*t,m=s+c+g,M=0;return m>0?(M=Math.sqrt(m+1)*2,r[3]=.25*M,r[0]=(p-f)/M,r[1]=(l-x)/M,r[2]=(v-h)/M):s>c&&s>g?(M=Math.sqrt(1+s-c-g)*2,r[3]=(p-f)/M,r[0]=.25*M,r[1]=(v+h)/M,r[2]=(l+x)/M):c>g?(M=Math.sqrt(1+c-s-g)*2,r[3]=(l-x)/M,r[0]=(v+h)/M,r[1]=.25*M,r[2]=(p+f)/M):(M=Math.sqrt(1+g-s-c)*2,r[3]=(v-h)/M,r[0]=(l+x)/M,r[1]=(p+f)/M,r[2]=.25*M),r}function E1(r,e,n,a){e[0]=a[12],e[1]=a[13],e[2]=a[14];var i=a[0],t=a[1],s=a[2],v=a[4],x=a[5],h=a[6],c=a[8],p=a[9],l=a[10];n[0]=Math.hypot(i,t,s),n[1]=Math.hypot(v,x,h),n[2]=Math.hypot(c,p,l);var f=1/n[0],g=1/n[1],m=1/n[2],M=i*f,y=t*g,P=s*m,A=v*f,d=x*g,R=h*m,E=c*f,T=p*g,L=l*m,I=M+d+L,z=0;return I>0?(z=Math.sqrt(I+1)*2,r[3]=.25*z,r[0]=(R-T)/z,r[1]=(E-P)/z,r[2]=(y-A)/z):M>d&&M>L?(z=Math.sqrt(1+M-d-L)*2,r[3]=(R-T)/z,r[0]=.25*z,r[1]=(y+A)/z,r[2]=(E+P)/z):d>L?(z=Math.sqrt(1+d-M-L)*2,r[3]=(E-P)/z,r[0]=(y+A)/z,r[1]=.25*z,r[2]=(R+T)/z):(z=Math.sqrt(1+L-M-d)*2,r[3]=(y-A)/z,r[0]=(E+P)/z,r[1]=(R+T)/z,r[2]=.25*z),r}function R1(r,e,n,a){var i=e[0],t=e[1],s=e[2],v=e[3],x=i+i,h=t+t,c=s+s,p=i*x,l=i*h,f=i*c,g=t*h,m=t*c,M=s*c,y=v*x,P=v*h,A=v*c,d=a[0],R=a[1],E=a[2];return r[0]=(1-(g+M))*d,r[1]=(l+A)*d,r[2]=(f-P)*d,r[3]=0,r[4]=(l-A)*R,r[5]=(1-(p+M))*R,r[6]=(m+y)*R,r[7]=0,r[8]=(f+P)*E,r[9]=(m-y)*E,r[10]=(1-(p+g))*E,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function P1(r,e,n,a,i){var t=e[0],s=e[1],v=e[2],x=e[3],h=t+t,c=s+s,p=v+v,l=t*h,f=t*c,g=t*p,m=s*c,M=s*p,y=v*p,P=x*h,A=x*c,d=x*p,R=a[0],E=a[1],T=a[2],L=i[0],I=i[1],z=i[2],B=(1-(m+y))*R,Y=(f+d)*R,N=(g-A)*R,S=(f-d)*E,q=(1-(l+y))*E,D=(M+P)*E,C=(g+A)*T,j=(M-P)*T,J=(1-(l+m))*T;return r[0]=B,r[1]=Y,r[2]=N,r[3]=0,r[4]=S,r[5]=q,r[6]=D,r[7]=0,r[8]=C,r[9]=j,r[10]=J,r[11]=0,r[12]=n[0]+L-(B*L+S*I+C*z),r[13]=n[1]+I-(Y*L+q*I+j*z),r[14]=n[2]+z-(N*L+D*I+J*z),r[15]=1,r}function z1(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=n+n,v=a+a,x=i+i,h=n*s,c=a*s,p=a*v,l=i*s,f=i*v,g=i*x,m=t*s,M=t*v,y=t*x;return r[0]=1-p-g,r[1]=c+y,r[2]=l-M,r[3]=0,r[4]=c-y,r[5]=1-h-g,r[6]=f+m,r[7]=0,r[8]=l+M,r[9]=f-m,r[10]=1-h-p,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function S1(r,e,n,a,i,t,s){var v=1/(n-e),x=1/(i-a),h=1/(t-s);return r[0]=t*2*v,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t*2*x,r[6]=0,r[7]=0,r[8]=(n+e)*v,r[9]=(i+a)*x,r[10]=(s+t)*h,r[11]=-1,r[12]=0,r[13]=0,r[14]=s*t*2*h,r[15]=0,r}function xr(r,e,n,a,i){var t=1/Math.tan(e/2);if(r[0]=t/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0){var s=1/(a-i);r[10]=(i+a)*s,r[14]=2*i*a*s}else r[10]=-1,r[14]=-2*a;return r}var w1=xr;function L1(r,e,n,a,i){var t=1/Math.tan(e/2);if(r[0]=t/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0){var s=1/(a-i);r[10]=i*s,r[14]=i*a*s}else r[10]=-1,r[14]=-a;return r}function T1(r,e,n,a){var i=Math.tan(e.upDegrees*Math.PI/180),t=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),v=Math.tan(e.rightDegrees*Math.PI/180),x=2/(s+v),h=2/(i+t);return r[0]=x,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=h,r[6]=0,r[7]=0,r[8]=-((s-v)*x*.5),r[9]=(i-t)*h*.5,r[10]=a/(n-a),r[11]=-1,r[12]=0,r[13]=0,r[14]=a*n/(n-a),r[15]=0,r}function hr(r,e,n,a,i,t,s){var v=1/(e-n),x=1/(a-i),h=1/(t-s);return r[0]=-2*v,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*h,r[11]=0,r[12]=(e+n)*v,r[13]=(i+a)*x,r[14]=(s+t)*h,r[15]=1,r}var I1=hr;function Y1(r,e,n,a,i,t,s){var v=1/(e-n),x=1/(a-i),h=1/(t-s);return r[0]=-2*v,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=h,r[11]=0,r[12]=(e+n)*v,r[13]=(i+a)*x,r[14]=t*h,r[15]=1,r}function N1(r,e,n,a){var i,t,s,v,x,h,c,p,l,f,g=e[0],m=e[1],M=e[2],y=a[0],P=a[1],A=a[2],d=n[0],R=n[1],E=n[2];return Math.abs(g-d)<w&&Math.abs(m-R)<w&&Math.abs(M-E)<w?nr(r):(c=g-d,p=m-R,l=M-E,f=1/Math.hypot(c,p,l),c*=f,p*=f,l*=f,i=P*l-A*p,t=A*c-y*l,s=y*p-P*c,f=Math.hypot(i,t,s),f?(f=1/f,i*=f,t*=f,s*=f):(i=0,t=0,s=0),v=p*s-l*t,x=l*i-c*s,h=c*t-p*i,f=Math.hypot(v,x,h),f?(f=1/f,v*=f,x*=f,h*=f):(v=0,x=0,h=0),r[0]=i,r[1]=v,r[2]=c,r[3]=0,r[4]=t,r[5]=x,r[6]=p,r[7]=0,r[8]=s,r[9]=h,r[10]=l,r[11]=0,r[12]=-(i*g+t*m+s*M),r[13]=-(v*g+x*m+h*M),r[14]=-(c*g+p*m+l*M),r[15]=1,r)}function O1(r,e,n,a){var i=e[0],t=e[1],s=e[2],v=a[0],x=a[1],h=a[2],c=i-n[0],p=t-n[1],l=s-n[2],f=c*c+p*p+l*l;f>0&&(f=1/Math.sqrt(f),c*=f,p*=f,l*=f);var g=x*l-h*p,m=h*c-v*l,M=v*p-x*c;return f=g*g+m*m+M*M,f>0&&(f=1/Math.sqrt(f),g*=f,m*=f,M*=f),r[0]=g,r[1]=m,r[2]=M,r[3]=0,r[4]=p*M-l*m,r[5]=l*g-c*M,r[6]=c*m-p*g,r[7]=0,r[8]=c,r[9]=p,r[10]=l,r[11]=0,r[12]=i,r[13]=t,r[14]=s,r[15]=1,r}function B1(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}function _1(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}function q1(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r[6]=e[6]+n[6],r[7]=e[7]+n[7],r[8]=e[8]+n[8],r[9]=e[9]+n[9],r[10]=e[10]+n[10],r[11]=e[11]+n[11],r[12]=e[12]+n[12],r[13]=e[13]+n[13],r[14]=e[14]+n[14],r[15]=e[15]+n[15],r}function cr(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r[4]=e[4]-n[4],r[5]=e[5]-n[5],r[6]=e[6]-n[6],r[7]=e[7]-n[7],r[8]=e[8]-n[8],r[9]=e[9]-n[9],r[10]=e[10]-n[10],r[11]=e[11]-n[11],r[12]=e[12]-n[12],r[13]=e[13]-n[13],r[14]=e[14]-n[14],r[15]=e[15]-n[15],r}function b1(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r[6]=e[6]*n,r[7]=e[7]*n,r[8]=e[8]*n,r[9]=e[9]*n,r[10]=e[10]*n,r[11]=e[11]*n,r[12]=e[12]*n,r[13]=e[13]*n,r[14]=e[14]*n,r[15]=e[15]*n,r}function F1(r,e,n,a){return r[0]=e[0]+n[0]*a,r[1]=e[1]+n[1]*a,r[2]=e[2]+n[2]*a,r[3]=e[3]+n[3]*a,r[4]=e[4]+n[4]*a,r[5]=e[5]+n[5]*a,r[6]=e[6]+n[6]*a,r[7]=e[7]+n[7]*a,r[8]=e[8]+n[8]*a,r[9]=e[9]+n[9]*a,r[10]=e[10]+n[10]*a,r[11]=e[11]+n[11]*a,r[12]=e[12]+n[12]*a,r[13]=e[13]+n[13]*a,r[14]=e[14]+n[14]*a,r[15]=e[15]+n[15]*a,r}function D1(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]}function C1(r,e){var n=r[0],a=r[1],i=r[2],t=r[3],s=r[4],v=r[5],x=r[6],h=r[7],c=r[8],p=r[9],l=r[10],f=r[11],g=r[12],m=r[13],M=r[14],y=r[15],P=e[0],A=e[1],d=e[2],R=e[3],E=e[4],T=e[5],L=e[6],I=e[7],z=e[8],B=e[9],Y=e[10],N=e[11],S=e[12],q=e[13],D=e[14],C=e[15];return Math.abs(n-P)<=w*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(a-A)<=w*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(i-d)<=w*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(t-R)<=w*Math.max(1,Math.abs(t),Math.abs(R))&&Math.abs(s-E)<=w*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(v-T)<=w*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(x-L)<=w*Math.max(1,Math.abs(x),Math.abs(L))&&Math.abs(h-I)<=w*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(c-z)<=w*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(p-B)<=w*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(l-Y)<=w*Math.max(1,Math.abs(l),Math.abs(Y))&&Math.abs(f-N)<=w*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(g-S)<=w*Math.max(1,Math.abs(g),Math.abs(S))&&Math.abs(m-q)<=w*Math.max(1,Math.abs(m),Math.abs(q))&&Math.abs(M-D)<=w*Math.max(1,Math.abs(M),Math.abs(D))&&Math.abs(y-C)<=w*Math.max(1,Math.abs(y),Math.abs(C))}var V1=ar,U1=cr;function k(){var r=new O(3);return O!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function G1(r){var e=r[0],n=r[1],a=r[2];return Math.hypot(e,n,a)}function X(r,e,n){var a=new O(3);return a[0]=r,a[1]=e,a[2]=n,a}function fr(r,e){var n=e[0],a=e[1],i=e[2],t=n*n+a*a+i*i;return t>0&&(t=1/Math.sqrt(t)),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function Mr(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function U(r,e,n){var a=e[0],i=e[1],t=e[2],s=n[0],v=n[1],x=n[2];return r[0]=i*x-t*v,r[1]=t*s-a*x,r[2]=a*v-i*s,r}var pr=G1;var ee=function(){var r=k();return function(e,n,a,i,t,s){var v,x;for(n||(n=3),a||(a=0),i?x=Math.min(i*n+a,e.length):x=e.length,v=a;v<x;v+=n)r[0]=e[v],r[1]=e[v+1],r[2]=e[v+2],t(r,r,s),e[v]=r[0],e[v+1]=r[1],e[v+2]=r[2];return e}}();function W1(){var r=new O(4);return O!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function gr(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=n*n+a*a+i*i+t*t;return s>0&&(s=1/Math.sqrt(s)),r[0]=n*s,r[1]=a*s,r[2]=i*s,r[3]=t*s,r}var ne=function(){var r=W1();return function(e,n,a,i,t,s){var v,x;for(n||(n=4),a||(a=0),i?x=Math.min(i*n+a,e.length):x=e.length,v=a;v<x;v+=n)r[0]=e[v],r[1]=e[v+1],r[2]=e[v+2],r[3]=e[v+3],t(r,r,s),e[v]=r[0],e[v+1]=r[1],e[v+2]=r[2],e[v+3]=r[3];return e}}();function Q(){var r=new O(4);return O!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function H1(r,e,n){n=n*.5;var a=Math.sin(n);return r[0]=a*e[0],r[1]=a*e[1],r[2]=a*e[2],r[3]=Math.cos(n),r}function Z(r,e,n,a){var i=e[0],t=e[1],s=e[2],v=e[3],x=n[0],h=n[1],c=n[2],p=n[3],l,f,g,m,M;return f=i*x+t*h+s*c+v*p,f<0&&(f=-f,x=-x,h=-h,c=-c,p=-p),1-f>w?(l=Math.acos(f),g=Math.sin(l),m=Math.sin((1-a)*l)/g,M=Math.sin(a*l)/g):(m=1-a,M=a),r[0]=m*i+M*x,r[1]=m*t+M*h,r[2]=m*s+M*c,r[3]=m*v+M*p,r}function k1(r,e){var n=e[0]+e[4]+e[8],a;if(n>0)a=Math.sqrt(n+1),r[3]=.5*a,a=.5/a,r[0]=(e[5]-e[7])*a,r[1]=(e[6]-e[2])*a,r[2]=(e[1]-e[3])*a;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var t=(i+1)%3,s=(i+2)%3;a=Math.sqrt(e[i*3+i]-e[t*3+t]-e[s*3+s]+1),r[i]=.5*a,a=.5/a,r[3]=(e[t*3+s]-e[s*3+t])*a,r[t]=(e[t*3+i]+e[i*3+t])*a,r[s]=(e[s*3+i]+e[i*3+s])*a}return r}var yr=gr;var ge=function(){var r=k(),e=X(1,0,0),n=X(0,1,0);return function(a,i,t){var s=Mr(i,t);return s<-.999999?(U(r,e,i),pr(r)<1e-6&&U(r,n,i),fr(r,r),H1(a,r,Math.PI),a):s>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(U(r,i,t),a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=1+s,yr(a,a))}}(),me=function(){var r=Q(),e=Q();return function(n,a,i,t,s,v){return Z(r,a,s,v),Z(e,i,t,v),Z(n,r,e,2*v*(1-v)),n}}(),ye=function(){var r=W();return function(e,n,a,i){return r[0]=a[0],r[3]=a[1],r[6]=a[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-n[0],r[5]=-n[1],r[8]=-n[2],yr(e,k1(e,r))}}();function Z1(){var r=new O(2);return O!=Float32Array&&(r[0]=0,r[1]=0),r}var we=function(){var r=Z1();return function(e,n,a,i,t,s){var v,x;for(n||(n=2),a||(a=0),i?x=Math.min(i*n+a,e.length):x=e.length,v=a;v<x;v+=n)r[0]=e[v],r[1]=e[v+1],t(r,r,s),e[v]=r[0],e[v+1]=r[1];return e}}();var V=class{constructor(e,n){this.canvas=e;this.gl=n;this.trianglePosBuffer_itemSize=3;this.trianglePosBuffer_numItems=24;this.colorBuffer_itemSize=3;this.colorBuffer_numItems=24;this.normalBuffer_itemSize=3;this.normalBuffer_numItems=24;this.render=()=>{this.gl.clearColor(Math.sin(performance.now()*.0013),Math.cos(performance.now()*.0014),Math.tan(performance.now()*.0016),.5),this.gl.enable(this.gl.DEPTH_TEST),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT);let e=10;for(let n=0;n<e;n++)this.drawCube({translate:[0,0,this.positions[n]*50],rotate:[{rotateDeg:Math.sin(performance.now()*.001),rotateVec:[this.positions[n],this.positions[n],this.positions[n]]}]}),this.drawCube({translate:[0,this.positions[n]*50,0],rotate:[{rotateDeg:Math.sin(performance.now()*.001),rotateVec:[this.positions[n],this.positions[n],this.positions[n]]}]}),this.drawCube({translate:[this.positions[n]*50,0,0],rotate:[{rotateDeg:Math.sin(performance.now()*.001),rotateVec:[this.positions[n],this.positions[n],this.positions[n]]}]}),this.drawCube({translate:[this.positions[n]*50,this.positions[n]*50,0],rotate:[{rotateDeg:Math.sin(performance.now()*.001),rotateVec:[this.positions[n],this.positions[n],this.positions[n]]}]}),this.drawCube({translate:[0,this.positions[n]*50,this.positions[n]*50],rotate:[{rotateDeg:Math.sin(performance.now()*.001),rotateVec:[this.positions[n],this.positions[n],this.positions[n]]}]}),this.drawCube({translate:[this.positions[n]*50,0,this.positions[n]*50],rotate:[{rotateDeg:Math.sin(performance.now()*.001),rotateVec:[this.positions[n],this.positions[n],this.positions[n]]}]});this.dataUpdate(),requestAnimationFrame(this.render)};let a=document.getElementById("slider1"),i=document.getElementById("slider2");this.angle1=parseInt(a.value),this.angle2=parseInt(i.value),a.addEventListener("input",t=>{this.angle1=parseFloat(a.value)}),i.addEventListener("input",t=>{this.angle2=parseFloat(i.value)})}init(){this.shader_prog=this.createProgramFromScript("vertexShader","fragShader"),this.gl.useProgram(this.shader_prog),console.info("setting up attrs..."),this.pos_attr=this.gl.getAttribLocation(this.shader_prog,"vPosition"),this.gl.enableVertexAttribArray(this.pos_attr),this.color_attr=this.gl.getAttribLocation(this.shader_prog,"vColor"),this.gl.enableVertexAttribArray(this.color_attr),this.normal_attr=this.gl.getAttribLocation(this.shader_prog,"vNormal"),this.gl.enableVertexAttribArray(this.normal_attr),this.MVPmatrix=this.gl.getUniformLocation(this.shader_prog,"uMVP"),this.MVmatrix=this.gl.getUniformLocation(this.shader_prog,"uMV"),this.MVNormalmatrix=this.gl.getUniformLocation(this.shader_prog,"uMVn"),this.time=this.gl.getUniformLocation(this.shader_prog,"time"),console.info("buffering..."),this.trianglePosBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.trianglePosBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.STATIC_DRAW),this.trianglePosBuffer_itemSize=3,this.trianglePosBuffer_numItems=24;let e=[];for(let n=0;n<72;n++)e.push(this.randomBetween(0,1));this.vertCol=new Float32Array(e),this.colorBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertCol,this.gl.STATIC_DRAW),this.colorBuffer_itemSize=3,this.colorBuffer_numItems=24,this.normalBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.normalBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,u,this.gl.STATIC_DRAW),this.normalBuffer_itemSize=3,this.normalBuffer_numItems=24,this.indexBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,G,this.gl.STATIC_DRAW),console.info("init done"),this.positions=[];for(let n=0;n<100;n++)this.positions.push(this.randomBetween(-1,1)*10)}randomBetween(e,n){return Math.random()*(n-e)+e}drawCube({scale:e=[50,50,50],rotate:n=[],translate:a=[0,0,0]}){let i=[this.angle1*200,this.angle2*200,600],t=[0,0,0],s=[0,1,0],v=_.create();_.lookAt(v,i,t,s);let x=_.create();_.fromTranslation(x,a),_.scale(x,x,e),n.forEach(f=>{_.rotate(x,x,f.rotateDeg,f.rotateVec)});let h=_.create();_.perspective(h,Math.PI/4,this.canvas.width/this.canvas.height,10,void 0);let c=_.create(),p=F.create(),l=_.create();_.multiply(c,v,x),F.normalFromMat4(p,c),_.multiply(l,h,c),this.gl.uniformMatrix4fv(this.MVPmatrix,!1,l),this.gl.uniformMatrix3fv(this.MVNormalmatrix,!1,p),this.gl.uniformMatrix4fv(this.MVmatrix,!1,c),this.gl.uniform1f(this.time,performance.now()*.001),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorBuffer),this.gl.vertexAttribPointer(this.color_attr,this.colorBuffer_itemSize,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.trianglePosBuffer),this.gl.vertexAttribPointer(this.pos_attr,this.trianglePosBuffer_itemSize,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.normalBuffer),this.gl.vertexAttribPointer(this.normal_attr,this.normalBuffer_itemSize,this.gl.FLOAT,!1,0,0),this.gl.drawElements(this.gl.TRIANGLES,G.length,this.gl.UNSIGNED_BYTE,0)}dataUpdate(){}compileShader(e,n){let a=this.gl.createShader(n);return this.gl.shaderSource(a,e),this.gl.compileShader(a),this.gl.getShaderParameter(a,this.gl.COMPILE_STATUS)||console.error("compiling shader failed: ",this.gl.getShaderInfoLog(a)),a}createProgram(e,n){let a=this.gl.createProgram();return this.gl.attachShader(a,e),this.gl.attachShader(a,n),this.gl.linkProgram(a),this.gl.getProgramParameter(a,this.gl.LINK_STATUS)||console.error("linking error: ",this.gl.getProgramInfoLog(a)),a}createShaderFromScript(e,n){let a=document.getElementById(e).text;return this.compileShader(a,n)}createProgramFromScript(e,n){let a=this.createShaderFromScript(e,this.gl.VERTEX_SHADER),i=this.createShaderFromScript(n,this.gl.FRAGMENT_SHADER);return this.createProgram(a,i)}};var{canvas:j1,gl:J1}=$(),Ar=new V(j1,J1);Ar.init();Ar.render();})();
//# sourceMappingURL=index.js.map
