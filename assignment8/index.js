"use strict";(()=>{var Rr=Object.defineProperty;var J=(r,e)=>{for(var n in e)Rr(r,n,{get:e[n],enumerable:!0})};function K(){let r=document.getElementById("myCanvas"),e=r.getContext("webgl");return{canvas:r,gl:e}}var $=new Float32Array([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1]),ue=new Float32Array([.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5]),u=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1]),G=new Uint8Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),rr=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,0,0,1,0,1,1,0,1,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0]);var S=1e-6,N=typeof Float32Array!="undefined"?Float32Array:Array;var e1=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var F={};J(F,{add:()=>Zr,adjoint:()=>Br,clone:()=>Sr,copy:()=>Lr,create:()=>W,determinant:()=>Or,equals:()=>Jr,exactEquals:()=>or,frob:()=>kr,fromMat2d:()=>Vr,fromMat4:()=>zr,fromQuat:()=>Gr,fromRotation:()=>Cr,fromScaling:()=>Ur,fromTranslation:()=>qr,fromValues:()=>wr,identity:()=>_r,invert:()=>Nr,mul:()=>Kr,multiply:()=>er,multiplyScalar:()=>Qr,multiplyScalarAndAdd:()=>jr,normalFromMat4:()=>Wr,projection:()=>Xr,rotate:()=>Dr,scale:()=>Fr,set:()=>Ir,str:()=>Hr,sub:()=>$r,subtract:()=>nr,translate:()=>br,transpose:()=>Yr});function W(){var r=new N(9);return N!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function zr(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r}function Sr(r){var e=new N(9);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function Lr(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function wr(r,e,n,a,i,t,s,h,v){var x=new N(9);return x[0]=r,x[1]=e,x[2]=n,x[3]=a,x[4]=i,x[5]=t,x[6]=s,x[7]=h,x[8]=v,x}function Ir(r,e,n,a,i,t,s,h,v,x){return r[0]=e,r[1]=n,r[2]=a,r[3]=i,r[4]=t,r[5]=s,r[6]=h,r[7]=v,r[8]=x,r}function _r(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Yr(r,e){if(r===e){var n=e[1],a=e[2],i=e[5];r[1]=e[3],r[2]=e[6],r[3]=n,r[5]=e[7],r[6]=a,r[7]=i}else r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8];return r}function Nr(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],h=e[5],v=e[6],x=e[7],l=e[8],p=l*s-h*x,M=-l*t+h*v,f=x*t-s*v,g=n*p+a*M+i*f;return g?(g=1/g,r[0]=p*g,r[1]=(-l*a+i*x)*g,r[2]=(h*a-i*s)*g,r[3]=M*g,r[4]=(l*n-i*v)*g,r[5]=(-h*n+i*t)*g,r[6]=f*g,r[7]=(-x*n+a*v)*g,r[8]=(s*n-a*t)*g,r):null}function Br(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],h=e[5],v=e[6],x=e[7],l=e[8];return r[0]=s*l-h*x,r[1]=i*x-a*l,r[2]=a*h-i*s,r[3]=h*v-t*l,r[4]=n*l-i*v,r[5]=i*t-n*h,r[6]=t*x-s*v,r[7]=a*v-n*x,r[8]=n*s-a*t,r}function Or(r){var e=r[0],n=r[1],a=r[2],i=r[3],t=r[4],s=r[5],h=r[6],v=r[7],x=r[8];return e*(x*t-s*v)+n*(-x*i+s*h)+a*(v*i-t*h)}function er(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],h=e[4],v=e[5],x=e[6],l=e[7],p=e[8],M=n[0],f=n[1],g=n[2],m=n[3],c=n[4],y=n[5],T=n[6],E=n[7],d=n[8];return r[0]=M*a+f*s+g*x,r[1]=M*i+f*h+g*l,r[2]=M*t+f*v+g*p,r[3]=m*a+c*s+y*x,r[4]=m*i+c*h+y*l,r[5]=m*t+c*v+y*p,r[6]=T*a+E*s+d*x,r[7]=T*i+E*h+d*l,r[8]=T*t+E*v+d*p,r}function br(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],h=e[4],v=e[5],x=e[6],l=e[7],p=e[8],M=n[0],f=n[1];return r[0]=a,r[1]=i,r[2]=t,r[3]=s,r[4]=h,r[5]=v,r[6]=M*a+f*s+x,r[7]=M*i+f*h+l,r[8]=M*t+f*v+p,r}function Dr(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],h=e[4],v=e[5],x=e[6],l=e[7],p=e[8],M=Math.sin(n),f=Math.cos(n);return r[0]=f*a+M*s,r[1]=f*i+M*h,r[2]=f*t+M*v,r[3]=f*s-M*a,r[4]=f*h-M*i,r[5]=f*v-M*t,r[6]=x,r[7]=l,r[8]=p,r}function Fr(r,e,n){var a=n[0],i=n[1];return r[0]=a*e[0],r[1]=a*e[1],r[2]=a*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function qr(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=e[0],r[7]=e[1],r[8]=1,r}function Cr(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=n,r[2]=0,r[3]=-n,r[4]=a,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Ur(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=e[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Vr(r,e){return r[0]=e[0],r[1]=e[1],r[2]=0,r[3]=e[2],r[4]=e[3],r[5]=0,r[6]=e[4],r[7]=e[5],r[8]=1,r}function Gr(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=n+n,h=a+a,v=i+i,x=n*s,l=a*s,p=a*h,M=i*s,f=i*h,g=i*v,m=t*s,c=t*h,y=t*v;return r[0]=1-p-g,r[3]=l-y,r[6]=M+c,r[1]=l+y,r[4]=1-x-g,r[7]=f-m,r[2]=M-c,r[5]=f+m,r[8]=1-x-p,r}function Wr(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],h=e[5],v=e[6],x=e[7],l=e[8],p=e[9],M=e[10],f=e[11],g=e[12],m=e[13],c=e[14],y=e[15],T=n*h-a*s,E=n*v-i*s,d=n*x-t*s,R=a*v-i*h,A=a*x-t*h,w=i*x-t*v,L=l*m-p*g,I=l*c-M*g,P=l*y-f*g,B=p*c-M*m,_=p*y-f*m,Y=M*y-f*c,z=T*Y-E*_+d*B+R*P-A*I+w*L;return z?(z=1/z,r[0]=(h*Y-v*_+x*B)*z,r[1]=(v*P-s*Y-x*I)*z,r[2]=(s*_-h*P+x*L)*z,r[3]=(i*_-a*Y-t*B)*z,r[4]=(n*Y-i*P+t*I)*z,r[5]=(a*P-n*_-t*L)*z,r[6]=(m*w-c*A+y*R)*z,r[7]=(c*d-g*w-y*E)*z,r[8]=(g*A-m*d+y*T)*z,r):null}function Xr(r,e,n){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/n,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}function Hr(r){return"mat3("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+")"}function kr(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])}function Zr(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r[6]=e[6]+n[6],r[7]=e[7]+n[7],r[8]=e[8]+n[8],r}function nr(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r[4]=e[4]-n[4],r[5]=e[5]-n[5],r[6]=e[6]-n[6],r[7]=e[7]-n[7],r[8]=e[8]-n[8],r}function Qr(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r[6]=e[6]*n,r[7]=e[7]*n,r[8]=e[8]*n,r}function jr(r,e,n,a){return r[0]=e[0]+n[0]*a,r[1]=e[1]+n[1]*a,r[2]=e[2]+n[2]*a,r[3]=e[3]+n[3]*a,r[4]=e[4]+n[4]*a,r[5]=e[5]+n[5]*a,r[6]=e[6]+n[6]*a,r[7]=e[7]+n[7]*a,r[8]=e[8]+n[8]*a,r}function or(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]}function Jr(r,e){var n=r[0],a=r[1],i=r[2],t=r[3],s=r[4],h=r[5],v=r[6],x=r[7],l=r[8],p=e[0],M=e[1],f=e[2],g=e[3],m=e[4],c=e[5],y=e[6],T=e[7],E=e[8];return Math.abs(n-p)<=S*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(a-M)<=S*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-f)<=S*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(t-g)<=S*Math.max(1,Math.abs(t),Math.abs(g))&&Math.abs(s-m)<=S*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(h-c)<=S*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(v-y)<=S*Math.max(1,Math.abs(v),Math.abs(y))&&Math.abs(x-T)<=S*Math.max(1,Math.abs(x),Math.abs(T))&&Math.abs(l-E)<=S*Math.max(1,Math.abs(l),Math.abs(E))}var Kr=er,$r=nr;var O={};J(O,{add:()=>De,adjoint:()=>se,clone:()=>re,copy:()=>ee,create:()=>ur,decompose:()=>Re,determinant:()=>he,equals:()=>Ue,exactEquals:()=>Ce,frob:()=>be,fromQuat:()=>ze,fromQuat2:()=>Ae,fromRotation:()=>me,fromRotationTranslation:()=>tr,fromRotationTranslationScale:()=>Te,fromRotationTranslationScaleOrigin:()=>Pe,fromScaling:()=>ge,fromTranslation:()=>Me,fromValues:()=>ne,fromXRotation:()=>ye,fromYRotation:()=>de,fromZRotation:()=>Ee,frustum:()=>Se,getRotation:()=>vr,getScaling:()=>hr,getTranslation:()=>sr,identity:()=>ar,invert:()=>te,lookAt:()=>Ne,mul:()=>Ve,multiply:()=>ir,multiplyScalar:()=>Fe,multiplyScalarAndAdd:()=>qe,ortho:()=>_e,orthoNO:()=>lr,orthoZO:()=>Ye,perspective:()=>Le,perspectiveFromFieldOfView:()=>Ie,perspectiveNO:()=>xr,perspectiveZO:()=>we,rotate:()=>le,rotateX:()=>fe,rotateY:()=>ce,rotateZ:()=>pe,scale:()=>xe,set:()=>ae,str:()=>Oe,sub:()=>Ge,subtract:()=>fr,targetTo:()=>Be,translate:()=>ve,transpose:()=>ie});function ur(){var r=new N(16);return N!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function re(r){var e=new N(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function ee(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function ne(r,e,n,a,i,t,s,h,v,x,l,p,M,f,g,m){var c=new N(16);return c[0]=r,c[1]=e,c[2]=n,c[3]=a,c[4]=i,c[5]=t,c[6]=s,c[7]=h,c[8]=v,c[9]=x,c[10]=l,c[11]=p,c[12]=M,c[13]=f,c[14]=g,c[15]=m,c}function ae(r,e,n,a,i,t,s,h,v,x,l,p,M,f,g,m,c){return r[0]=e,r[1]=n,r[2]=a,r[3]=i,r[4]=t,r[5]=s,r[6]=h,r[7]=v,r[8]=x,r[9]=l,r[10]=p,r[11]=M,r[12]=f,r[13]=g,r[14]=m,r[15]=c,r}function ar(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function ie(r,e){if(r===e){var n=e[1],a=e[2],i=e[3],t=e[6],s=e[7],h=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=n,r[6]=e[9],r[7]=e[13],r[8]=a,r[9]=t,r[11]=e[14],r[12]=i,r[13]=s,r[14]=h}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r}function te(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],h=e[5],v=e[6],x=e[7],l=e[8],p=e[9],M=e[10],f=e[11],g=e[12],m=e[13],c=e[14],y=e[15],T=n*h-a*s,E=n*v-i*s,d=n*x-t*s,R=a*v-i*h,A=a*x-t*h,w=i*x-t*v,L=l*m-p*g,I=l*c-M*g,P=l*y-f*g,B=p*c-M*m,_=p*y-f*m,Y=M*y-f*c,z=T*Y-E*_+d*B+R*P-A*I+w*L;return z?(z=1/z,r[0]=(h*Y-v*_+x*B)*z,r[1]=(i*_-a*Y-t*B)*z,r[2]=(m*w-c*A+y*R)*z,r[3]=(M*A-p*w-f*R)*z,r[4]=(v*P-s*Y-x*I)*z,r[5]=(n*Y-i*P+t*I)*z,r[6]=(c*d-g*w-y*E)*z,r[7]=(l*w-M*d+f*E)*z,r[8]=(s*_-h*P+x*L)*z,r[9]=(a*P-n*_-t*L)*z,r[10]=(g*A-m*d+y*T)*z,r[11]=(p*d-l*A-f*T)*z,r[12]=(h*I-s*B-v*L)*z,r[13]=(n*B-a*I+i*L)*z,r[14]=(m*E-g*R-c*T)*z,r[15]=(l*R-p*E+M*T)*z,r):null}function se(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],h=e[5],v=e[6],x=e[7],l=e[8],p=e[9],M=e[10],f=e[11],g=e[12],m=e[13],c=e[14],y=e[15],T=n*h-a*s,E=n*v-i*s,d=n*x-t*s,R=a*v-i*h,A=a*x-t*h,w=i*x-t*v,L=l*m-p*g,I=l*c-M*g,P=l*y-f*g,B=p*c-M*m,_=p*y-f*m,Y=M*y-f*c;return r[0]=h*Y-v*_+x*B,r[1]=i*_-a*Y-t*B,r[2]=m*w-c*A+y*R,r[3]=M*A-p*w-f*R,r[4]=v*P-s*Y-x*I,r[5]=n*Y-i*P+t*I,r[6]=c*d-g*w-y*E,r[7]=l*w-M*d+f*E,r[8]=s*_-h*P+x*L,r[9]=a*P-n*_-t*L,r[10]=g*A-m*d+y*T,r[11]=p*d-l*A-f*T,r[12]=h*I-s*B-v*L,r[13]=n*B-a*I+i*L,r[14]=m*E-g*R-c*T,r[15]=l*R-p*E+M*T,r}function he(r){var e=r[0],n=r[1],a=r[2],i=r[3],t=r[4],s=r[5],h=r[6],v=r[7],x=r[8],l=r[9],p=r[10],M=r[11],f=r[12],g=r[13],m=r[14],c=r[15],y=e*s-n*t,T=e*h-a*t,E=n*h-a*s,d=x*g-l*f,R=x*m-p*f,A=l*m-p*g,w=e*A-n*R+a*d,L=t*A-s*R+h*d,I=x*E-l*T+p*y,P=f*E-g*T+m*y;return v*w-i*L+c*I-M*P}function ir(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],h=e[4],v=e[5],x=e[6],l=e[7],p=e[8],M=e[9],f=e[10],g=e[11],m=e[12],c=e[13],y=e[14],T=e[15],E=n[0],d=n[1],R=n[2],A=n[3];return r[0]=E*a+d*h+R*p+A*m,r[1]=E*i+d*v+R*M+A*c,r[2]=E*t+d*x+R*f+A*y,r[3]=E*s+d*l+R*g+A*T,E=n[4],d=n[5],R=n[6],A=n[7],r[4]=E*a+d*h+R*p+A*m,r[5]=E*i+d*v+R*M+A*c,r[6]=E*t+d*x+R*f+A*y,r[7]=E*s+d*l+R*g+A*T,E=n[8],d=n[9],R=n[10],A=n[11],r[8]=E*a+d*h+R*p+A*m,r[9]=E*i+d*v+R*M+A*c,r[10]=E*t+d*x+R*f+A*y,r[11]=E*s+d*l+R*g+A*T,E=n[12],d=n[13],R=n[14],A=n[15],r[12]=E*a+d*h+R*p+A*m,r[13]=E*i+d*v+R*M+A*c,r[14]=E*t+d*x+R*f+A*y,r[15]=E*s+d*l+R*g+A*T,r}function ve(r,e,n){var a=n[0],i=n[1],t=n[2],s,h,v,x,l,p,M,f,g,m,c,y;return e===r?(r[12]=e[0]*a+e[4]*i+e[8]*t+e[12],r[13]=e[1]*a+e[5]*i+e[9]*t+e[13],r[14]=e[2]*a+e[6]*i+e[10]*t+e[14],r[15]=e[3]*a+e[7]*i+e[11]*t+e[15]):(s=e[0],h=e[1],v=e[2],x=e[3],l=e[4],p=e[5],M=e[6],f=e[7],g=e[8],m=e[9],c=e[10],y=e[11],r[0]=s,r[1]=h,r[2]=v,r[3]=x,r[4]=l,r[5]=p,r[6]=M,r[7]=f,r[8]=g,r[9]=m,r[10]=c,r[11]=y,r[12]=s*a+l*i+g*t+e[12],r[13]=h*a+p*i+m*t+e[13],r[14]=v*a+M*i+c*t+e[14],r[15]=x*a+f*i+y*t+e[15]),r}function xe(r,e,n){var a=n[0],i=n[1],t=n[2];return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3]*a,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function le(r,e,n,a){var i=a[0],t=a[1],s=a[2],h=Math.hypot(i,t,s),v,x,l,p,M,f,g,m,c,y,T,E,d,R,A,w,L,I,P,B,_,Y,z,b;return h<S?null:(h=1/h,i*=h,t*=h,s*=h,v=Math.sin(n),x=Math.cos(n),l=1-x,p=e[0],M=e[1],f=e[2],g=e[3],m=e[4],c=e[5],y=e[6],T=e[7],E=e[8],d=e[9],R=e[10],A=e[11],w=i*i*l+x,L=t*i*l+s*v,I=s*i*l-t*v,P=i*t*l-s*v,B=t*t*l+x,_=s*t*l+i*v,Y=i*s*l+t*v,z=t*s*l-i*v,b=s*s*l+x,r[0]=p*w+m*L+E*I,r[1]=M*w+c*L+d*I,r[2]=f*w+y*L+R*I,r[3]=g*w+T*L+A*I,r[4]=p*P+m*B+E*_,r[5]=M*P+c*B+d*_,r[6]=f*P+y*B+R*_,r[7]=g*P+T*B+A*_,r[8]=p*Y+m*z+E*b,r[9]=M*Y+c*z+d*b,r[10]=f*Y+y*z+R*b,r[11]=g*Y+T*z+A*b,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function fe(r,e,n){var a=Math.sin(n),i=Math.cos(n),t=e[4],s=e[5],h=e[6],v=e[7],x=e[8],l=e[9],p=e[10],M=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=t*i+x*a,r[5]=s*i+l*a,r[6]=h*i+p*a,r[7]=v*i+M*a,r[8]=x*i-t*a,r[9]=l*i-s*a,r[10]=p*i-h*a,r[11]=M*i-v*a,r}function ce(r,e,n){var a=Math.sin(n),i=Math.cos(n),t=e[0],s=e[1],h=e[2],v=e[3],x=e[8],l=e[9],p=e[10],M=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=t*i-x*a,r[1]=s*i-l*a,r[2]=h*i-p*a,r[3]=v*i-M*a,r[8]=t*a+x*i,r[9]=s*a+l*i,r[10]=h*a+p*i,r[11]=v*a+M*i,r}function pe(r,e,n){var a=Math.sin(n),i=Math.cos(n),t=e[0],s=e[1],h=e[2],v=e[3],x=e[4],l=e[5],p=e[6],M=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=t*i+x*a,r[1]=s*i+l*a,r[2]=h*i+p*a,r[3]=v*i+M*a,r[4]=x*i-t*a,r[5]=l*i-s*a,r[6]=p*i-h*a,r[7]=M*i-v*a,r}function Me(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function ge(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function me(r,e,n){var a=n[0],i=n[1],t=n[2],s=Math.hypot(a,i,t),h,v,x;return s<S?null:(s=1/s,a*=s,i*=s,t*=s,h=Math.sin(e),v=Math.cos(e),x=1-v,r[0]=a*a*x+v,r[1]=i*a*x+t*h,r[2]=t*a*x-i*h,r[3]=0,r[4]=a*i*x-t*h,r[5]=i*i*x+v,r[6]=t*i*x+a*h,r[7]=0,r[8]=a*t*x+i*h,r[9]=i*t*x-a*h,r[10]=t*t*x+v,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function ye(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=n,r[7]=0,r[8]=0,r[9]=-n,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function de(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=0,r[2]=-n,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=0,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Ee(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=n,r[2]=0,r[3]=0,r[4]=-n,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function tr(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],h=a+a,v=i+i,x=t+t,l=a*h,p=a*v,M=a*x,f=i*v,g=i*x,m=t*x,c=s*h,y=s*v,T=s*x;return r[0]=1-(f+m),r[1]=p+T,r[2]=M-y,r[3]=0,r[4]=p-T,r[5]=1-(l+m),r[6]=g+c,r[7]=0,r[8]=M+y,r[9]=g-c,r[10]=1-(l+f),r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function Ae(r,e){var n=new N(3),a=-e[0],i=-e[1],t=-e[2],s=e[3],h=e[4],v=e[5],x=e[6],l=e[7],p=a*a+i*i+t*t+s*s;return p>0?(n[0]=(h*s+l*a+v*t-x*i)*2/p,n[1]=(v*s+l*i+x*a-h*t)*2/p,n[2]=(x*s+l*t+h*i-v*a)*2/p):(n[0]=(h*s+l*a+v*t-x*i)*2,n[1]=(v*s+l*i+x*a-h*t)*2,n[2]=(x*s+l*t+h*i-v*a)*2),tr(r,e,n),r}function sr(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function hr(r,e){var n=e[0],a=e[1],i=e[2],t=e[4],s=e[5],h=e[6],v=e[8],x=e[9],l=e[10];return r[0]=Math.hypot(n,a,i),r[1]=Math.hypot(t,s,h),r[2]=Math.hypot(v,x,l),r}function vr(r,e){var n=new N(3);hr(n,e);var a=1/n[0],i=1/n[1],t=1/n[2],s=e[0]*a,h=e[1]*i,v=e[2]*t,x=e[4]*a,l=e[5]*i,p=e[6]*t,M=e[8]*a,f=e[9]*i,g=e[10]*t,m=s+l+g,c=0;return m>0?(c=Math.sqrt(m+1)*2,r[3]=.25*c,r[0]=(p-f)/c,r[1]=(M-v)/c,r[2]=(h-x)/c):s>l&&s>g?(c=Math.sqrt(1+s-l-g)*2,r[3]=(p-f)/c,r[0]=.25*c,r[1]=(h+x)/c,r[2]=(M+v)/c):l>g?(c=Math.sqrt(1+l-s-g)*2,r[3]=(M-v)/c,r[0]=(h+x)/c,r[1]=.25*c,r[2]=(p+f)/c):(c=Math.sqrt(1+g-s-l)*2,r[3]=(h-x)/c,r[0]=(M+v)/c,r[1]=(p+f)/c,r[2]=.25*c),r}function Re(r,e,n,a){e[0]=a[12],e[1]=a[13],e[2]=a[14];var i=a[0],t=a[1],s=a[2],h=a[4],v=a[5],x=a[6],l=a[8],p=a[9],M=a[10];n[0]=Math.hypot(i,t,s),n[1]=Math.hypot(h,v,x),n[2]=Math.hypot(l,p,M);var f=1/n[0],g=1/n[1],m=1/n[2],c=i*f,y=t*g,T=s*m,E=h*f,d=v*g,R=x*m,A=l*f,w=p*g,L=M*m,I=c+d+L,P=0;return I>0?(P=Math.sqrt(I+1)*2,r[3]=.25*P,r[0]=(R-w)/P,r[1]=(A-T)/P,r[2]=(y-E)/P):c>d&&c>L?(P=Math.sqrt(1+c-d-L)*2,r[3]=(R-w)/P,r[0]=.25*P,r[1]=(y+E)/P,r[2]=(A+T)/P):d>L?(P=Math.sqrt(1+d-c-L)*2,r[3]=(A-T)/P,r[0]=(y+E)/P,r[1]=.25*P,r[2]=(R+w)/P):(P=Math.sqrt(1+L-c-d)*2,r[3]=(y-E)/P,r[0]=(A+T)/P,r[1]=(R+w)/P,r[2]=.25*P),r}function Te(r,e,n,a){var i=e[0],t=e[1],s=e[2],h=e[3],v=i+i,x=t+t,l=s+s,p=i*v,M=i*x,f=i*l,g=t*x,m=t*l,c=s*l,y=h*v,T=h*x,E=h*l,d=a[0],R=a[1],A=a[2];return r[0]=(1-(g+c))*d,r[1]=(M+E)*d,r[2]=(f-T)*d,r[3]=0,r[4]=(M-E)*R,r[5]=(1-(p+c))*R,r[6]=(m+y)*R,r[7]=0,r[8]=(f+T)*A,r[9]=(m-y)*A,r[10]=(1-(p+g))*A,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function Pe(r,e,n,a,i){var t=e[0],s=e[1],h=e[2],v=e[3],x=t+t,l=s+s,p=h+h,M=t*x,f=t*l,g=t*p,m=s*l,c=s*p,y=h*p,T=v*x,E=v*l,d=v*p,R=a[0],A=a[1],w=a[2],L=i[0],I=i[1],P=i[2],B=(1-(m+y))*R,_=(f+d)*R,Y=(g-E)*R,z=(f-d)*A,b=(1-(M+y))*A,q=(c+T)*A,C=(g+E)*w,j=(c-T)*w,o=(1-(M+m))*w;return r[0]=B,r[1]=_,r[2]=Y,r[3]=0,r[4]=z,r[5]=b,r[6]=q,r[7]=0,r[8]=C,r[9]=j,r[10]=o,r[11]=0,r[12]=n[0]+L-(B*L+z*I+C*P),r[13]=n[1]+I-(_*L+b*I+j*P),r[14]=n[2]+P-(Y*L+q*I+o*P),r[15]=1,r}function ze(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=n+n,h=a+a,v=i+i,x=n*s,l=a*s,p=a*h,M=i*s,f=i*h,g=i*v,m=t*s,c=t*h,y=t*v;return r[0]=1-p-g,r[1]=l+y,r[2]=M-c,r[3]=0,r[4]=l-y,r[5]=1-x-g,r[6]=f+m,r[7]=0,r[8]=M+c,r[9]=f-m,r[10]=1-x-p,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Se(r,e,n,a,i,t,s){var h=1/(n-e),v=1/(i-a),x=1/(t-s);return r[0]=t*2*h,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t*2*v,r[6]=0,r[7]=0,r[8]=(n+e)*h,r[9]=(i+a)*v,r[10]=(s+t)*x,r[11]=-1,r[12]=0,r[13]=0,r[14]=s*t*2*x,r[15]=0,r}function xr(r,e,n,a,i){var t=1/Math.tan(e/2);if(r[0]=t/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0){var s=1/(a-i);r[10]=(i+a)*s,r[14]=2*i*a*s}else r[10]=-1,r[14]=-2*a;return r}var Le=xr;function we(r,e,n,a,i){var t=1/Math.tan(e/2);if(r[0]=t/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0){var s=1/(a-i);r[10]=i*s,r[14]=i*a*s}else r[10]=-1,r[14]=-a;return r}function Ie(r,e,n,a){var i=Math.tan(e.upDegrees*Math.PI/180),t=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),h=Math.tan(e.rightDegrees*Math.PI/180),v=2/(s+h),x=2/(i+t);return r[0]=v,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=x,r[6]=0,r[7]=0,r[8]=-((s-h)*v*.5),r[9]=(i-t)*x*.5,r[10]=a/(n-a),r[11]=-1,r[12]=0,r[13]=0,r[14]=a*n/(n-a),r[15]=0,r}function lr(r,e,n,a,i,t,s){var h=1/(e-n),v=1/(a-i),x=1/(t-s);return r[0]=-2*h,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*v,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*x,r[11]=0,r[12]=(e+n)*h,r[13]=(i+a)*v,r[14]=(s+t)*x,r[15]=1,r}var _e=lr;function Ye(r,e,n,a,i,t,s){var h=1/(e-n),v=1/(a-i),x=1/(t-s);return r[0]=-2*h,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*v,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=x,r[11]=0,r[12]=(e+n)*h,r[13]=(i+a)*v,r[14]=t*x,r[15]=1,r}function Ne(r,e,n,a){var i,t,s,h,v,x,l,p,M,f,g=e[0],m=e[1],c=e[2],y=a[0],T=a[1],E=a[2],d=n[0],R=n[1],A=n[2];return Math.abs(g-d)<S&&Math.abs(m-R)<S&&Math.abs(c-A)<S?ar(r):(l=g-d,p=m-R,M=c-A,f=1/Math.hypot(l,p,M),l*=f,p*=f,M*=f,i=T*M-E*p,t=E*l-y*M,s=y*p-T*l,f=Math.hypot(i,t,s),f?(f=1/f,i*=f,t*=f,s*=f):(i=0,t=0,s=0),h=p*s-M*t,v=M*i-l*s,x=l*t-p*i,f=Math.hypot(h,v,x),f?(f=1/f,h*=f,v*=f,x*=f):(h=0,v=0,x=0),r[0]=i,r[1]=h,r[2]=l,r[3]=0,r[4]=t,r[5]=v,r[6]=p,r[7]=0,r[8]=s,r[9]=x,r[10]=M,r[11]=0,r[12]=-(i*g+t*m+s*c),r[13]=-(h*g+v*m+x*c),r[14]=-(l*g+p*m+M*c),r[15]=1,r)}function Be(r,e,n,a){var i=e[0],t=e[1],s=e[2],h=a[0],v=a[1],x=a[2],l=i-n[0],p=t-n[1],M=s-n[2],f=l*l+p*p+M*M;f>0&&(f=1/Math.sqrt(f),l*=f,p*=f,M*=f);var g=v*M-x*p,m=x*l-h*M,c=h*p-v*l;return f=g*g+m*m+c*c,f>0&&(f=1/Math.sqrt(f),g*=f,m*=f,c*=f),r[0]=g,r[1]=m,r[2]=c,r[3]=0,r[4]=p*c-M*m,r[5]=M*g-l*c,r[6]=l*m-p*g,r[7]=0,r[8]=l,r[9]=p,r[10]=M,r[11]=0,r[12]=i,r[13]=t,r[14]=s,r[15]=1,r}function Oe(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}function be(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}function De(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r[6]=e[6]+n[6],r[7]=e[7]+n[7],r[8]=e[8]+n[8],r[9]=e[9]+n[9],r[10]=e[10]+n[10],r[11]=e[11]+n[11],r[12]=e[12]+n[12],r[13]=e[13]+n[13],r[14]=e[14]+n[14],r[15]=e[15]+n[15],r}function fr(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r[4]=e[4]-n[4],r[5]=e[5]-n[5],r[6]=e[6]-n[6],r[7]=e[7]-n[7],r[8]=e[8]-n[8],r[9]=e[9]-n[9],r[10]=e[10]-n[10],r[11]=e[11]-n[11],r[12]=e[12]-n[12],r[13]=e[13]-n[13],r[14]=e[14]-n[14],r[15]=e[15]-n[15],r}function Fe(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r[6]=e[6]*n,r[7]=e[7]*n,r[8]=e[8]*n,r[9]=e[9]*n,r[10]=e[10]*n,r[11]=e[11]*n,r[12]=e[12]*n,r[13]=e[13]*n,r[14]=e[14]*n,r[15]=e[15]*n,r}function qe(r,e,n,a){return r[0]=e[0]+n[0]*a,r[1]=e[1]+n[1]*a,r[2]=e[2]+n[2]*a,r[3]=e[3]+n[3]*a,r[4]=e[4]+n[4]*a,r[5]=e[5]+n[5]*a,r[6]=e[6]+n[6]*a,r[7]=e[7]+n[7]*a,r[8]=e[8]+n[8]*a,r[9]=e[9]+n[9]*a,r[10]=e[10]+n[10]*a,r[11]=e[11]+n[11]*a,r[12]=e[12]+n[12]*a,r[13]=e[13]+n[13]*a,r[14]=e[14]+n[14]*a,r[15]=e[15]+n[15]*a,r}function Ce(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]}function Ue(r,e){var n=r[0],a=r[1],i=r[2],t=r[3],s=r[4],h=r[5],v=r[6],x=r[7],l=r[8],p=r[9],M=r[10],f=r[11],g=r[12],m=r[13],c=r[14],y=r[15],T=e[0],E=e[1],d=e[2],R=e[3],A=e[4],w=e[5],L=e[6],I=e[7],P=e[8],B=e[9],_=e[10],Y=e[11],z=e[12],b=e[13],q=e[14],C=e[15];return Math.abs(n-T)<=S*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(a-E)<=S*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(i-d)<=S*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(t-R)<=S*Math.max(1,Math.abs(t),Math.abs(R))&&Math.abs(s-A)<=S*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(h-w)<=S*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(v-L)<=S*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(x-I)<=S*Math.max(1,Math.abs(x),Math.abs(I))&&Math.abs(l-P)<=S*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(p-B)<=S*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(M-_)<=S*Math.max(1,Math.abs(M),Math.abs(_))&&Math.abs(f-Y)<=S*Math.max(1,Math.abs(f),Math.abs(Y))&&Math.abs(g-z)<=S*Math.max(1,Math.abs(g),Math.abs(z))&&Math.abs(m-b)<=S*Math.max(1,Math.abs(m),Math.abs(b))&&Math.abs(c-q)<=S*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(y-C)<=S*Math.max(1,Math.abs(y),Math.abs(C))}var Ve=ir,Ge=fr;function H(){var r=new N(3);return N!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function We(r){var e=r[0],n=r[1],a=r[2];return Math.hypot(e,n,a)}function k(r,e,n){var a=new N(3);return a[0]=r,a[1]=e,a[2]=n,a}function cr(r,e){var n=e[0],a=e[1],i=e[2],t=n*n+a*a+i*i;return t>0&&(t=1/Math.sqrt(t)),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function pr(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function V(r,e,n){var a=e[0],i=e[1],t=e[2],s=n[0],h=n[1],v=n[2];return r[0]=i*v-t*h,r[1]=t*s-a*v,r[2]=a*h-i*s,r}var Mr=We;var n1=function(){var r=H();return function(e,n,a,i,t,s){var h,v;for(n||(n=3),a||(a=0),i?v=Math.min(i*n+a,e.length):v=e.length,h=a;h<v;h+=n)r[0]=e[h],r[1]=e[h+1],r[2]=e[h+2],t(r,r,s),e[h]=r[0],e[h+1]=r[1],e[h+2]=r[2];return e}}();function Xe(){var r=new N(4);return N!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function mr(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=n*n+a*a+i*i+t*t;return s>0&&(s=1/Math.sqrt(s)),r[0]=n*s,r[1]=a*s,r[2]=i*s,r[3]=t*s,r}var a1=function(){var r=Xe();return function(e,n,a,i,t,s){var h,v;for(n||(n=4),a||(a=0),i?v=Math.min(i*n+a,e.length):v=e.length,h=a;h<v;h+=n)r[0]=e[h],r[1]=e[h+1],r[2]=e[h+2],r[3]=e[h+3],t(r,r,s),e[h]=r[0],e[h+1]=r[1],e[h+2]=r[2],e[h+3]=r[3];return e}}();function Q(){var r=new N(4);return N!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function He(r,e,n){n=n*.5;var a=Math.sin(n);return r[0]=a*e[0],r[1]=a*e[1],r[2]=a*e[2],r[3]=Math.cos(n),r}function Z(r,e,n,a){var i=e[0],t=e[1],s=e[2],h=e[3],v=n[0],x=n[1],l=n[2],p=n[3],M,f,g,m,c;return f=i*v+t*x+s*l+h*p,f<0&&(f=-f,v=-v,x=-x,l=-l,p=-p),1-f>S?(M=Math.acos(f),g=Math.sin(M),m=Math.sin((1-a)*M)/g,c=Math.sin(a*M)/g):(m=1-a,c=a),r[0]=m*i+c*v,r[1]=m*t+c*x,r[2]=m*s+c*l,r[3]=m*h+c*p,r}function ke(r,e){var n=e[0]+e[4]+e[8],a;if(n>0)a=Math.sqrt(n+1),r[3]=.5*a,a=.5/a,r[0]=(e[5]-e[7])*a,r[1]=(e[6]-e[2])*a,r[2]=(e[1]-e[3])*a;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var t=(i+1)%3,s=(i+2)%3;a=Math.sqrt(e[i*3+i]-e[t*3+t]-e[s*3+s]+1),r[i]=.5*a,a=.5/a,r[3]=(e[t*3+s]-e[s*3+t])*a,r[t]=(e[t*3+i]+e[i*3+t])*a,r[s]=(e[s*3+i]+e[i*3+s])*a}return r}var dr=mr;var m1=function(){var r=H(),e=k(1,0,0),n=k(0,1,0);return function(a,i,t){var s=pr(i,t);return s<-.999999?(V(r,e,i),Mr(r)<1e-6&&V(r,n,i),cr(r,r),He(a,r,Math.PI),a):s>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(V(r,i,t),a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=1+s,dr(a,a))}}(),y1=function(){var r=Q(),e=Q();return function(n,a,i,t,s,h){return Z(r,a,s,h),Z(e,i,t,h),Z(n,r,e,2*h*(1-h)),n}}(),d1=function(){var r=W();return function(e,n,a,i){return r[0]=a[0],r[3]=a[1],r[6]=a[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-n[0],r[5]=-n[1],r[8]=-n[2],dr(e,ke(e,r))}}();function Qe(){var r=new N(2);return N!=Float32Array&&(r[0]=0,r[1]=0),r}var L1=function(){var r=Qe();return function(e,n,a,i,t,s){var h,v;for(n||(n=2),a||(a=0),i?v=Math.min(i*n+a,e.length):v=e.length,h=a;h<v;h+=n)r[0]=e[h],r[1]=e[h+1],t(r,r,s),e[h]=r[0],e[h+1]=r[1];return e}}();var U=class{constructor(e,n){this.canvas=e;this.gl=n;this.trianglePosBuffer_itemSize=3;this.trianglePosBuffer_numItems=24;this.colorBuffer_itemSize=3;this.colorBuffer_numItems=24;this.normalBuffer_itemSize=3;this.normalBuffer_numItems=24;this.textureBuffer_itemSize=2;this.textureBuffer_numItems=24;this.render=()=>{this.gl.clearColor(Math.sin(performance.now()*.0013),Math.cos(performance.now()*.0014),Math.tan(performance.now()*.0016),.5),this.gl.enable(this.gl.DEPTH_TEST),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT);let e=10;for(let n=0;n<e;n++)this.drawCube({translate:[0,0,this.positions[n]*50],rotate:[{rotateDeg:Math.sin(performance.now()*.001),rotateVec:[this.positions[n],this.positions[n],this.positions[n]]}]}),this.drawCube({translate:[0,this.positions[n]*50,0],rotate:[{rotateDeg:Math.sin(performance.now()*.001),rotateVec:[this.positions[n],this.positions[n],this.positions[n]]}]}),this.drawCube({translate:[this.positions[n]*50,0,0],rotate:[{rotateDeg:Math.sin(performance.now()*.001),rotateVec:[this.positions[n],this.positions[n],this.positions[n]]}]}),this.drawCube({translate:[this.positions[n]*50,this.positions[n]*50,0],rotate:[{rotateDeg:Math.sin(performance.now()*.001),rotateVec:[this.positions[n],this.positions[n],this.positions[n]]}]}),this.drawCube({translate:[0,this.positions[n]*50,this.positions[n]*50],rotate:[{rotateDeg:Math.sin(performance.now()*.001),rotateVec:[this.positions[n],this.positions[n],this.positions[n]]}]}),this.drawCube({translate:[this.positions[n]*50,0,this.positions[n]*50],rotate:[{rotateDeg:Math.sin(performance.now()*.001),rotateVec:[this.positions[n],this.positions[n],this.positions[n]]}]});this.dataUpdate(),requestAnimationFrame(this.render)};let a=document.getElementById("slider1"),i=document.getElementById("slider2");this.angle1=parseInt(a.value),this.angle2=parseInt(i.value),a.addEventListener("input",t=>{this.angle1=parseFloat(a.value)}),i.addEventListener("input",t=>{this.angle2=parseFloat(i.value)})}init(){this.shader_prog=this.createProgramFromScript("vertexShader","fragShader"),this.gl.useProgram(this.shader_prog),console.info("setting up attrs..."),this.pos_attr=this.gl.getAttribLocation(this.shader_prog,"vPosition"),this.gl.enableVertexAttribArray(this.pos_attr),this.color_attr=this.gl.getAttribLocation(this.shader_prog,"vColor"),this.gl.enableVertexAttribArray(this.color_attr),this.normal_attr=this.gl.getAttribLocation(this.shader_prog,"vNormal"),this.gl.enableVertexAttribArray(this.normal_attr),this.tex_attr=this.gl.getAttribLocation(this.shader_prog,"vTexCoord"),this.gl.enableVertexAttribArray(this.tex_attr),this.MVPmatrix=this.gl.getUniformLocation(this.shader_prog,"uMVP"),this.MVmatrix=this.gl.getUniformLocation(this.shader_prog,"uMV"),this.MVNormalmatrix=this.gl.getUniformLocation(this.shader_prog,"uMVn"),this.time=this.gl.getUniformLocation(this.shader_prog,"time"),this.texSampler1=this.gl.getUniformLocation(this.shader_prog,"texSampler1"),this.gl.uniform1i(this.texSampler1,0),this.texSampler2=this.gl.getUniformLocation(this.shader_prog,"texSampler2"),this.gl.uniform1i(this.texSampler2,1),console.info("buffering..."),this.trianglePosBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.trianglePosBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,$,this.gl.STATIC_DRAW),this.trianglePosBuffer_itemSize=3,this.trianglePosBuffer_numItems=24;let e=[];for(let i=0;i<72;i++)e.push(this.randomBetween(0,1));this.vertCol=new Float32Array(e),this.colorBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertCol,this.gl.STATIC_DRAW),this.colorBuffer_itemSize=3,this.colorBuffer_numItems=24,this.normalBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.normalBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,u,this.gl.STATIC_DRAW),this.normalBuffer_itemSize=3,this.normalBuffer_numItems=24,this.textureBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.textureBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,rr,this.gl.STATIC_DRAW),this.indexBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,G,this.gl.STATIC_DRAW),this.texture1=this.gl.createTexture(),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);let n=new Image;this.texture2=this.gl.createTexture(),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture2),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);let a=new Image;n.onload=()=>{this.loadTexture(n,this.texture1)},n.crossOrigin="anonymous",n.src="https://farm6.staticflickr.com/5564/30725680942_e3bfe50e5e_b.jpg",a.onload=()=>{this.loadTexture(a,this.texture2)},a.crossOrigin="anonymous",a.src="https://farm6.staticflickr.com/5564/30725680942_e3bfe50e5e_b.jpg",console.info("init done"),this.positions=[];for(let i=0;i<100;i++)this.positions.push(this.randomBetween(-1,1)*10)}randomBetween(e,n){return Math.random()*(n-e)+e}loadTexture(e,n){this.gl.bindTexture(this.gl.TEXTURE_2D,n),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR)}drawCube({scale:e=[50,50,50],rotate:n=[],translate:a=[0,0,0]}){let i=[this.angle1*200,this.angle2*200,600],t=[0,0,0],s=[0,1,0],h=O.create();O.lookAt(h,i,t,s);let v=O.create();O.fromTranslation(v,a),O.scale(v,v,e),n.forEach(f=>{O.rotate(v,v,f.rotateDeg,f.rotateVec)});let x=O.create();O.perspective(x,Math.PI/4,this.canvas.width/this.canvas.height,10,void 0);let l=O.create(),p=F.create(),M=O.create();O.multiply(l,h,v),F.normalFromMat4(p,l),O.multiply(M,x,l),this.gl.uniformMatrix4fv(this.MVPmatrix,!1,M),this.gl.uniformMatrix3fv(this.MVNormalmatrix,!1,p),this.gl.uniformMatrix4fv(this.MVmatrix,!1,l),this.gl.uniform1f(this.time,performance.now()*.001),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorBuffer),this.gl.vertexAttribPointer(this.color_attr,this.colorBuffer_itemSize,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.trianglePosBuffer),this.gl.vertexAttribPointer(this.pos_attr,this.trianglePosBuffer_itemSize,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.normalBuffer),this.gl.vertexAttribPointer(this.normal_attr,this.normalBuffer_itemSize,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.textureBuffer),this.gl.vertexAttribPointer(this.tex_attr,this.textureBuffer_itemSize,this.gl.FLOAT,!1,0,0),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture1),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture2),this.gl.drawElements(this.gl.TRIANGLES,G.length,this.gl.UNSIGNED_BYTE,0)}dataUpdate(){}compileShader(e,n){let a=this.gl.createShader(n);return this.gl.shaderSource(a,e),this.gl.compileShader(a),this.gl.getShaderParameter(a,this.gl.COMPILE_STATUS)||console.error("compiling shader failed: ",this.gl.getShaderInfoLog(a)),a}createProgram(e,n){let a=this.gl.createProgram();return this.gl.attachShader(a,e),this.gl.attachShader(a,n),this.gl.linkProgram(a),this.gl.getProgramParameter(a,this.gl.LINK_STATUS)||console.error("linking error: ",this.gl.getProgramInfoLog(a)),a}createShaderFromScript(e,n){let a=document.getElementById(e).text;return this.compileShader(a,n)}createProgramFromScript(e,n){let a=this.createShaderFromScript(e,this.gl.VERTEX_SHADER),i=this.createShaderFromScript(n,this.gl.FRAGMENT_SHADER);return this.createProgram(a,i)}};var{canvas:oe,gl:Je}=K(),Ar=new U(oe,Je);Ar.init();Ar.render();})();
//# sourceMappingURL=index.js.map
