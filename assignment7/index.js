"use strict";(()=>{var Rr=Object.defineProperty;var K=(r,e)=>{for(var n in e)Rr(r,n,{get:e[n],enumerable:!0})};function $(){let r=document.getElementById("myCanvas"),e=r.getContext("webgl");return{canvas:r,gl:e}}var o=new Float32Array([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1]),u=new Float32Array([.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5]),rr=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1]),U=new Uint8Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]);var L=1e-6,O=typeof Float32Array!="undefined"?Float32Array:Array;var re=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var b={};K(b,{add:()=>Zr,adjoint:()=>Br,clone:()=>Lr,copy:()=>Tr,create:()=>W,determinant:()=>_r,equals:()=>Kr,exactEquals:()=>Jr,frob:()=>Xr,fromMat2d:()=>Ur,fromMat4:()=>Sr,fromQuat:()=>Gr,fromRotation:()=>Vr,fromScaling:()=>Cr,fromTranslation:()=>Dr,fromValues:()=>wr,identity:()=>Yr,invert:()=>Or,mul:()=>$r,multiply:()=>er,multiplyScalar:()=>Qr,multiplyScalarAndAdd:()=>jr,normalFromMat4:()=>Wr,projection:()=>Hr,rotate:()=>qr,scale:()=>br,set:()=>Ir,str:()=>kr,sub:()=>or,subtract:()=>nr,translate:()=>Fr,transpose:()=>Nr});function W(){var r=new O(9);return O!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function Sr(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r}function Lr(r){var e=new O(9);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function Tr(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function wr(r,e,n,a,i,t,s,v,x){var h=new O(9);return h[0]=r,h[1]=e,h[2]=n,h[3]=a,h[4]=i,h[5]=t,h[6]=s,h[7]=v,h[8]=x,h}function Ir(r,e,n,a,i,t,s,v,x,h){return r[0]=e,r[1]=n,r[2]=a,r[3]=i,r[4]=t,r[5]=s,r[6]=v,r[7]=x,r[8]=h,r}function Yr(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Nr(r,e){if(r===e){var n=e[1],a=e[2],i=e[5];r[1]=e[3],r[2]=e[6],r[3]=n,r[5]=e[7],r[6]=a,r[7]=i}else r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8];return r}function Or(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=e[6],h=e[7],f=e[8],M=f*s-v*h,p=-f*t+v*x,l=h*t-s*x,g=n*M+a*p+i*l;return g?(g=1/g,r[0]=M*g,r[1]=(-f*a+i*h)*g,r[2]=(v*a-i*s)*g,r[3]=p*g,r[4]=(f*n-i*x)*g,r[5]=(-v*n+i*t)*g,r[6]=l*g,r[7]=(-h*n+a*x)*g,r[8]=(s*n-a*t)*g,r):null}function Br(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=e[6],h=e[7],f=e[8];return r[0]=s*f-v*h,r[1]=i*h-a*f,r[2]=a*v-i*s,r[3]=v*x-t*f,r[4]=n*f-i*x,r[5]=i*t-n*v,r[6]=t*h-s*x,r[7]=a*x-n*h,r[8]=n*s-a*t,r}function _r(r){var e=r[0],n=r[1],a=r[2],i=r[3],t=r[4],s=r[5],v=r[6],x=r[7],h=r[8];return e*(h*t-s*x)+n*(-h*i+s*v)+a*(x*i-t*v)}function er(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],h=e[6],f=e[7],M=e[8],p=n[0],l=n[1],g=n[2],m=n[3],c=n[4],y=n[5],P=n[6],d=n[7],A=n[8];return r[0]=p*a+l*s+g*h,r[1]=p*i+l*v+g*f,r[2]=p*t+l*x+g*M,r[3]=m*a+c*s+y*h,r[4]=m*i+c*v+y*f,r[5]=m*t+c*x+y*M,r[6]=P*a+d*s+A*h,r[7]=P*i+d*v+A*f,r[8]=P*t+d*x+A*M,r}function Fr(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],h=e[6],f=e[7],M=e[8],p=n[0],l=n[1];return r[0]=a,r[1]=i,r[2]=t,r[3]=s,r[4]=v,r[5]=x,r[6]=p*a+l*s+h,r[7]=p*i+l*v+f,r[8]=p*t+l*x+M,r}function qr(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],h=e[6],f=e[7],M=e[8],p=Math.sin(n),l=Math.cos(n);return r[0]=l*a+p*s,r[1]=l*i+p*v,r[2]=l*t+p*x,r[3]=l*s-p*a,r[4]=l*v-p*i,r[5]=l*x-p*t,r[6]=h,r[7]=f,r[8]=M,r}function br(r,e,n){var a=n[0],i=n[1];return r[0]=a*e[0],r[1]=a*e[1],r[2]=a*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function Dr(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=e[0],r[7]=e[1],r[8]=1,r}function Vr(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=n,r[2]=0,r[3]=-n,r[4]=a,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Cr(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=e[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Ur(r,e){return r[0]=e[0],r[1]=e[1],r[2]=0,r[3]=e[2],r[4]=e[3],r[5]=0,r[6]=e[4],r[7]=e[5],r[8]=1,r}function Gr(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=n+n,v=a+a,x=i+i,h=n*s,f=a*s,M=a*v,p=i*s,l=i*v,g=i*x,m=t*s,c=t*v,y=t*x;return r[0]=1-M-g,r[3]=f-y,r[6]=p+c,r[1]=f+y,r[4]=1-h-g,r[7]=l-m,r[2]=p-c,r[5]=l+m,r[8]=1-h-M,r}function Wr(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=e[6],h=e[7],f=e[8],M=e[9],p=e[10],l=e[11],g=e[12],m=e[13],c=e[14],y=e[15],P=n*v-a*s,d=n*x-i*s,A=n*h-t*s,R=a*x-i*v,E=a*h-t*v,w=i*h-t*x,T=f*m-M*g,I=f*c-p*g,z=f*y-l*g,B=M*c-p*m,Y=M*y-l*m,N=p*y-l*c,S=P*N-d*Y+A*B+R*z-E*I+w*T;return S?(S=1/S,r[0]=(v*N-x*Y+h*B)*S,r[1]=(x*z-s*N-h*I)*S,r[2]=(s*Y-v*z+h*T)*S,r[3]=(i*Y-a*N-t*B)*S,r[4]=(n*N-i*z+t*I)*S,r[5]=(a*z-n*Y-t*T)*S,r[6]=(m*w-c*E+y*R)*S,r[7]=(c*A-g*w-y*d)*S,r[8]=(g*E-m*A+y*P)*S,r):null}function Hr(r,e,n){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/n,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}function kr(r){return"mat3("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+")"}function Xr(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])}function Zr(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r[6]=e[6]+n[6],r[7]=e[7]+n[7],r[8]=e[8]+n[8],r}function nr(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r[4]=e[4]-n[4],r[5]=e[5]-n[5],r[6]=e[6]-n[6],r[7]=e[7]-n[7],r[8]=e[8]-n[8],r}function Qr(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r[6]=e[6]*n,r[7]=e[7]*n,r[8]=e[8]*n,r}function jr(r,e,n,a){return r[0]=e[0]+n[0]*a,r[1]=e[1]+n[1]*a,r[2]=e[2]+n[2]*a,r[3]=e[3]+n[3]*a,r[4]=e[4]+n[4]*a,r[5]=e[5]+n[5]*a,r[6]=e[6]+n[6]*a,r[7]=e[7]+n[7]*a,r[8]=e[8]+n[8]*a,r}function Jr(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]}function Kr(r,e){var n=r[0],a=r[1],i=r[2],t=r[3],s=r[4],v=r[5],x=r[6],h=r[7],f=r[8],M=e[0],p=e[1],l=e[2],g=e[3],m=e[4],c=e[5],y=e[6],P=e[7],d=e[8];return Math.abs(n-M)<=L*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(a-p)<=L*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-l)<=L*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(t-g)<=L*Math.max(1,Math.abs(t),Math.abs(g))&&Math.abs(s-m)<=L*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(v-c)<=L*Math.max(1,Math.abs(v),Math.abs(c))&&Math.abs(x-y)<=L*Math.max(1,Math.abs(x),Math.abs(y))&&Math.abs(h-P)<=L*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(f-d)<=L*Math.max(1,Math.abs(f),Math.abs(d))}var $r=er,or=nr;var _={};K(_,{add:()=>q1,adjoint:()=>s1,clone:()=>r1,copy:()=>e1,create:()=>ur,decompose:()=>R1,determinant:()=>v1,equals:()=>C1,exactEquals:()=>V1,frob:()=>F1,fromQuat:()=>S1,fromQuat2:()=>E1,fromRotation:()=>m1,fromRotationTranslation:()=>tr,fromRotationTranslationScale:()=>P1,fromRotationTranslationScaleOrigin:()=>z1,fromScaling:()=>g1,fromTranslation:()=>p1,fromValues:()=>n1,fromXRotation:()=>y1,fromYRotation:()=>A1,fromZRotation:()=>d1,frustum:()=>L1,getRotation:()=>xr,getScaling:()=>vr,getTranslation:()=>sr,identity:()=>ar,invert:()=>t1,lookAt:()=>O1,mul:()=>U1,multiply:()=>ir,multiplyScalar:()=>b1,multiplyScalarAndAdd:()=>D1,ortho:()=>Y1,orthoNO:()=>fr,orthoZO:()=>N1,perspective:()=>T1,perspectiveFromFieldOfView:()=>I1,perspectiveNO:()=>hr,perspectiveZO:()=>w1,rotate:()=>f1,rotateX:()=>l1,rotateY:()=>c1,rotateZ:()=>M1,scale:()=>h1,set:()=>a1,str:()=>_1,sub:()=>G1,subtract:()=>lr,targetTo:()=>B1,translate:()=>x1,transpose:()=>i1});function ur(){var r=new O(16);return O!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function r1(r){var e=new O(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function e1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function n1(r,e,n,a,i,t,s,v,x,h,f,M,p,l,g,m){var c=new O(16);return c[0]=r,c[1]=e,c[2]=n,c[3]=a,c[4]=i,c[5]=t,c[6]=s,c[7]=v,c[8]=x,c[9]=h,c[10]=f,c[11]=M,c[12]=p,c[13]=l,c[14]=g,c[15]=m,c}function a1(r,e,n,a,i,t,s,v,x,h,f,M,p,l,g,m,c){return r[0]=e,r[1]=n,r[2]=a,r[3]=i,r[4]=t,r[5]=s,r[6]=v,r[7]=x,r[8]=h,r[9]=f,r[10]=M,r[11]=p,r[12]=l,r[13]=g,r[14]=m,r[15]=c,r}function ar(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function i1(r,e){if(r===e){var n=e[1],a=e[2],i=e[3],t=e[6],s=e[7],v=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=n,r[6]=e[9],r[7]=e[13],r[8]=a,r[9]=t,r[11]=e[14],r[12]=i,r[13]=s,r[14]=v}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r}function t1(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=e[6],h=e[7],f=e[8],M=e[9],p=e[10],l=e[11],g=e[12],m=e[13],c=e[14],y=e[15],P=n*v-a*s,d=n*x-i*s,A=n*h-t*s,R=a*x-i*v,E=a*h-t*v,w=i*h-t*x,T=f*m-M*g,I=f*c-p*g,z=f*y-l*g,B=M*c-p*m,Y=M*y-l*m,N=p*y-l*c,S=P*N-d*Y+A*B+R*z-E*I+w*T;return S?(S=1/S,r[0]=(v*N-x*Y+h*B)*S,r[1]=(i*Y-a*N-t*B)*S,r[2]=(m*w-c*E+y*R)*S,r[3]=(p*E-M*w-l*R)*S,r[4]=(x*z-s*N-h*I)*S,r[5]=(n*N-i*z+t*I)*S,r[6]=(c*A-g*w-y*d)*S,r[7]=(f*w-p*A+l*d)*S,r[8]=(s*Y-v*z+h*T)*S,r[9]=(a*z-n*Y-t*T)*S,r[10]=(g*E-m*A+y*P)*S,r[11]=(M*A-f*E-l*P)*S,r[12]=(v*I-s*B-x*T)*S,r[13]=(n*B-a*I+i*T)*S,r[14]=(m*d-g*R-c*P)*S,r[15]=(f*R-M*d+p*P)*S,r):null}function s1(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=e[4],v=e[5],x=e[6],h=e[7],f=e[8],M=e[9],p=e[10],l=e[11],g=e[12],m=e[13],c=e[14],y=e[15],P=n*v-a*s,d=n*x-i*s,A=n*h-t*s,R=a*x-i*v,E=a*h-t*v,w=i*h-t*x,T=f*m-M*g,I=f*c-p*g,z=f*y-l*g,B=M*c-p*m,Y=M*y-l*m,N=p*y-l*c;return r[0]=v*N-x*Y+h*B,r[1]=i*Y-a*N-t*B,r[2]=m*w-c*E+y*R,r[3]=p*E-M*w-l*R,r[4]=x*z-s*N-h*I,r[5]=n*N-i*z+t*I,r[6]=c*A-g*w-y*d,r[7]=f*w-p*A+l*d,r[8]=s*Y-v*z+h*T,r[9]=a*z-n*Y-t*T,r[10]=g*E-m*A+y*P,r[11]=M*A-f*E-l*P,r[12]=v*I-s*B-x*T,r[13]=n*B-a*I+i*T,r[14]=m*d-g*R-c*P,r[15]=f*R-M*d+p*P,r}function v1(r){var e=r[0],n=r[1],a=r[2],i=r[3],t=r[4],s=r[5],v=r[6],x=r[7],h=r[8],f=r[9],M=r[10],p=r[11],l=r[12],g=r[13],m=r[14],c=r[15],y=e*s-n*t,P=e*v-a*t,d=n*v-a*s,A=h*g-f*l,R=h*m-M*l,E=f*m-M*g,w=e*E-n*R+a*A,T=t*E-s*R+v*A,I=h*d-f*P+M*y,z=l*d-g*P+m*y;return x*w-i*T+c*I-p*z}function ir(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=e[4],x=e[5],h=e[6],f=e[7],M=e[8],p=e[9],l=e[10],g=e[11],m=e[12],c=e[13],y=e[14],P=e[15],d=n[0],A=n[1],R=n[2],E=n[3];return r[0]=d*a+A*v+R*M+E*m,r[1]=d*i+A*x+R*p+E*c,r[2]=d*t+A*h+R*l+E*y,r[3]=d*s+A*f+R*g+E*P,d=n[4],A=n[5],R=n[6],E=n[7],r[4]=d*a+A*v+R*M+E*m,r[5]=d*i+A*x+R*p+E*c,r[6]=d*t+A*h+R*l+E*y,r[7]=d*s+A*f+R*g+E*P,d=n[8],A=n[9],R=n[10],E=n[11],r[8]=d*a+A*v+R*M+E*m,r[9]=d*i+A*x+R*p+E*c,r[10]=d*t+A*h+R*l+E*y,r[11]=d*s+A*f+R*g+E*P,d=n[12],A=n[13],R=n[14],E=n[15],r[12]=d*a+A*v+R*M+E*m,r[13]=d*i+A*x+R*p+E*c,r[14]=d*t+A*h+R*l+E*y,r[15]=d*s+A*f+R*g+E*P,r}function x1(r,e,n){var a=n[0],i=n[1],t=n[2],s,v,x,h,f,M,p,l,g,m,c,y;return e===r?(r[12]=e[0]*a+e[4]*i+e[8]*t+e[12],r[13]=e[1]*a+e[5]*i+e[9]*t+e[13],r[14]=e[2]*a+e[6]*i+e[10]*t+e[14],r[15]=e[3]*a+e[7]*i+e[11]*t+e[15]):(s=e[0],v=e[1],x=e[2],h=e[3],f=e[4],M=e[5],p=e[6],l=e[7],g=e[8],m=e[9],c=e[10],y=e[11],r[0]=s,r[1]=v,r[2]=x,r[3]=h,r[4]=f,r[5]=M,r[6]=p,r[7]=l,r[8]=g,r[9]=m,r[10]=c,r[11]=y,r[12]=s*a+f*i+g*t+e[12],r[13]=v*a+M*i+m*t+e[13],r[14]=x*a+p*i+c*t+e[14],r[15]=h*a+l*i+y*t+e[15]),r}function h1(r,e,n){var a=n[0],i=n[1],t=n[2];return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3]*a,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function f1(r,e,n,a){var i=a[0],t=a[1],s=a[2],v=Math.hypot(i,t,s),x,h,f,M,p,l,g,m,c,y,P,d,A,R,E,w,T,I,z,B,Y,N,S,F;return v<L?null:(v=1/v,i*=v,t*=v,s*=v,x=Math.sin(n),h=Math.cos(n),f=1-h,M=e[0],p=e[1],l=e[2],g=e[3],m=e[4],c=e[5],y=e[6],P=e[7],d=e[8],A=e[9],R=e[10],E=e[11],w=i*i*f+h,T=t*i*f+s*x,I=s*i*f-t*x,z=i*t*f-s*x,B=t*t*f+h,Y=s*t*f+i*x,N=i*s*f+t*x,S=t*s*f-i*x,F=s*s*f+h,r[0]=M*w+m*T+d*I,r[1]=p*w+c*T+A*I,r[2]=l*w+y*T+R*I,r[3]=g*w+P*T+E*I,r[4]=M*z+m*B+d*Y,r[5]=p*z+c*B+A*Y,r[6]=l*z+y*B+R*Y,r[7]=g*z+P*B+E*Y,r[8]=M*N+m*S+d*F,r[9]=p*N+c*S+A*F,r[10]=l*N+y*S+R*F,r[11]=g*N+P*S+E*F,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function l1(r,e,n){var a=Math.sin(n),i=Math.cos(n),t=e[4],s=e[5],v=e[6],x=e[7],h=e[8],f=e[9],M=e[10],p=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=t*i+h*a,r[5]=s*i+f*a,r[6]=v*i+M*a,r[7]=x*i+p*a,r[8]=h*i-t*a,r[9]=f*i-s*a,r[10]=M*i-v*a,r[11]=p*i-x*a,r}function c1(r,e,n){var a=Math.sin(n),i=Math.cos(n),t=e[0],s=e[1],v=e[2],x=e[3],h=e[8],f=e[9],M=e[10],p=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=t*i-h*a,r[1]=s*i-f*a,r[2]=v*i-M*a,r[3]=x*i-p*a,r[8]=t*a+h*i,r[9]=s*a+f*i,r[10]=v*a+M*i,r[11]=x*a+p*i,r}function M1(r,e,n){var a=Math.sin(n),i=Math.cos(n),t=e[0],s=e[1],v=e[2],x=e[3],h=e[4],f=e[5],M=e[6],p=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=t*i+h*a,r[1]=s*i+f*a,r[2]=v*i+M*a,r[3]=x*i+p*a,r[4]=h*i-t*a,r[5]=f*i-s*a,r[6]=M*i-v*a,r[7]=p*i-x*a,r}function p1(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function g1(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function m1(r,e,n){var a=n[0],i=n[1],t=n[2],s=Math.hypot(a,i,t),v,x,h;return s<L?null:(s=1/s,a*=s,i*=s,t*=s,v=Math.sin(e),x=Math.cos(e),h=1-x,r[0]=a*a*h+x,r[1]=i*a*h+t*v,r[2]=t*a*h-i*v,r[3]=0,r[4]=a*i*h-t*v,r[5]=i*i*h+x,r[6]=t*i*h+a*v,r[7]=0,r[8]=a*t*h+i*v,r[9]=i*t*h-a*v,r[10]=t*t*h+x,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function y1(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=n,r[7]=0,r[8]=0,r[9]=-n,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function A1(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=0,r[2]=-n,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=0,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function d1(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=n,r[2]=0,r[3]=0,r[4]=-n,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function tr(r,e,n){var a=e[0],i=e[1],t=e[2],s=e[3],v=a+a,x=i+i,h=t+t,f=a*v,M=a*x,p=a*h,l=i*x,g=i*h,m=t*h,c=s*v,y=s*x,P=s*h;return r[0]=1-(l+m),r[1]=M+P,r[2]=p-y,r[3]=0,r[4]=M-P,r[5]=1-(f+m),r[6]=g+c,r[7]=0,r[8]=p+y,r[9]=g-c,r[10]=1-(f+l),r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function E1(r,e){var n=new O(3),a=-e[0],i=-e[1],t=-e[2],s=e[3],v=e[4],x=e[5],h=e[6],f=e[7],M=a*a+i*i+t*t+s*s;return M>0?(n[0]=(v*s+f*a+x*t-h*i)*2/M,n[1]=(x*s+f*i+h*a-v*t)*2/M,n[2]=(h*s+f*t+v*i-x*a)*2/M):(n[0]=(v*s+f*a+x*t-h*i)*2,n[1]=(x*s+f*i+h*a-v*t)*2,n[2]=(h*s+f*t+v*i-x*a)*2),tr(r,e,n),r}function sr(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function vr(r,e){var n=e[0],a=e[1],i=e[2],t=e[4],s=e[5],v=e[6],x=e[8],h=e[9],f=e[10];return r[0]=Math.hypot(n,a,i),r[1]=Math.hypot(t,s,v),r[2]=Math.hypot(x,h,f),r}function xr(r,e){var n=new O(3);vr(n,e);var a=1/n[0],i=1/n[1],t=1/n[2],s=e[0]*a,v=e[1]*i,x=e[2]*t,h=e[4]*a,f=e[5]*i,M=e[6]*t,p=e[8]*a,l=e[9]*i,g=e[10]*t,m=s+f+g,c=0;return m>0?(c=Math.sqrt(m+1)*2,r[3]=.25*c,r[0]=(M-l)/c,r[1]=(p-x)/c,r[2]=(v-h)/c):s>f&&s>g?(c=Math.sqrt(1+s-f-g)*2,r[3]=(M-l)/c,r[0]=.25*c,r[1]=(v+h)/c,r[2]=(p+x)/c):f>g?(c=Math.sqrt(1+f-s-g)*2,r[3]=(p-x)/c,r[0]=(v+h)/c,r[1]=.25*c,r[2]=(M+l)/c):(c=Math.sqrt(1+g-s-f)*2,r[3]=(v-h)/c,r[0]=(p+x)/c,r[1]=(M+l)/c,r[2]=.25*c),r}function R1(r,e,n,a){e[0]=a[12],e[1]=a[13],e[2]=a[14];var i=a[0],t=a[1],s=a[2],v=a[4],x=a[5],h=a[6],f=a[8],M=a[9],p=a[10];n[0]=Math.hypot(i,t,s),n[1]=Math.hypot(v,x,h),n[2]=Math.hypot(f,M,p);var l=1/n[0],g=1/n[1],m=1/n[2],c=i*l,y=t*g,P=s*m,d=v*l,A=x*g,R=h*m,E=f*l,w=M*g,T=p*m,I=c+A+T,z=0;return I>0?(z=Math.sqrt(I+1)*2,r[3]=.25*z,r[0]=(R-w)/z,r[1]=(E-P)/z,r[2]=(y-d)/z):c>A&&c>T?(z=Math.sqrt(1+c-A-T)*2,r[3]=(R-w)/z,r[0]=.25*z,r[1]=(y+d)/z,r[2]=(E+P)/z):A>T?(z=Math.sqrt(1+A-c-T)*2,r[3]=(E-P)/z,r[0]=(y+d)/z,r[1]=.25*z,r[2]=(R+w)/z):(z=Math.sqrt(1+T-c-A)*2,r[3]=(y-d)/z,r[0]=(E+P)/z,r[1]=(R+w)/z,r[2]=.25*z),r}function P1(r,e,n,a){var i=e[0],t=e[1],s=e[2],v=e[3],x=i+i,h=t+t,f=s+s,M=i*x,p=i*h,l=i*f,g=t*h,m=t*f,c=s*f,y=v*x,P=v*h,d=v*f,A=a[0],R=a[1],E=a[2];return r[0]=(1-(g+c))*A,r[1]=(p+d)*A,r[2]=(l-P)*A,r[3]=0,r[4]=(p-d)*R,r[5]=(1-(M+c))*R,r[6]=(m+y)*R,r[7]=0,r[8]=(l+P)*E,r[9]=(m-y)*E,r[10]=(1-(M+g))*E,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function z1(r,e,n,a,i){var t=e[0],s=e[1],v=e[2],x=e[3],h=t+t,f=s+s,M=v+v,p=t*h,l=t*f,g=t*M,m=s*f,c=s*M,y=v*M,P=x*h,d=x*f,A=x*M,R=a[0],E=a[1],w=a[2],T=i[0],I=i[1],z=i[2],B=(1-(m+y))*R,Y=(l+A)*R,N=(g-d)*R,S=(l-A)*E,F=(1-(p+y))*E,D=(c+P)*E,V=(g+d)*w,j=(c-P)*w,J=(1-(p+m))*w;return r[0]=B,r[1]=Y,r[2]=N,r[3]=0,r[4]=S,r[5]=F,r[6]=D,r[7]=0,r[8]=V,r[9]=j,r[10]=J,r[11]=0,r[12]=n[0]+T-(B*T+S*I+V*z),r[13]=n[1]+I-(Y*T+F*I+j*z),r[14]=n[2]+z-(N*T+D*I+J*z),r[15]=1,r}function S1(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=n+n,v=a+a,x=i+i,h=n*s,f=a*s,M=a*v,p=i*s,l=i*v,g=i*x,m=t*s,c=t*v,y=t*x;return r[0]=1-M-g,r[1]=f+y,r[2]=p-c,r[3]=0,r[4]=f-y,r[5]=1-h-g,r[6]=l+m,r[7]=0,r[8]=p+c,r[9]=l-m,r[10]=1-h-M,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function L1(r,e,n,a,i,t,s){var v=1/(n-e),x=1/(i-a),h=1/(t-s);return r[0]=t*2*v,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t*2*x,r[6]=0,r[7]=0,r[8]=(n+e)*v,r[9]=(i+a)*x,r[10]=(s+t)*h,r[11]=-1,r[12]=0,r[13]=0,r[14]=s*t*2*h,r[15]=0,r}function hr(r,e,n,a,i){var t=1/Math.tan(e/2);if(r[0]=t/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0){var s=1/(a-i);r[10]=(i+a)*s,r[14]=2*i*a*s}else r[10]=-1,r[14]=-2*a;return r}var T1=hr;function w1(r,e,n,a,i){var t=1/Math.tan(e/2);if(r[0]=t/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0){var s=1/(a-i);r[10]=i*s,r[14]=i*a*s}else r[10]=-1,r[14]=-a;return r}function I1(r,e,n,a){var i=Math.tan(e.upDegrees*Math.PI/180),t=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),v=Math.tan(e.rightDegrees*Math.PI/180),x=2/(s+v),h=2/(i+t);return r[0]=x,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=h,r[6]=0,r[7]=0,r[8]=-((s-v)*x*.5),r[9]=(i-t)*h*.5,r[10]=a/(n-a),r[11]=-1,r[12]=0,r[13]=0,r[14]=a*n/(n-a),r[15]=0,r}function fr(r,e,n,a,i,t,s){var v=1/(e-n),x=1/(a-i),h=1/(t-s);return r[0]=-2*v,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*h,r[11]=0,r[12]=(e+n)*v,r[13]=(i+a)*x,r[14]=(s+t)*h,r[15]=1,r}var Y1=fr;function N1(r,e,n,a,i,t,s){var v=1/(e-n),x=1/(a-i),h=1/(t-s);return r[0]=-2*v,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=h,r[11]=0,r[12]=(e+n)*v,r[13]=(i+a)*x,r[14]=t*h,r[15]=1,r}function O1(r,e,n,a){var i,t,s,v,x,h,f,M,p,l,g=e[0],m=e[1],c=e[2],y=a[0],P=a[1],d=a[2],A=n[0],R=n[1],E=n[2];return Math.abs(g-A)<L&&Math.abs(m-R)<L&&Math.abs(c-E)<L?ar(r):(f=g-A,M=m-R,p=c-E,l=1/Math.hypot(f,M,p),f*=l,M*=l,p*=l,i=P*p-d*M,t=d*f-y*p,s=y*M-P*f,l=Math.hypot(i,t,s),l?(l=1/l,i*=l,t*=l,s*=l):(i=0,t=0,s=0),v=M*s-p*t,x=p*i-f*s,h=f*t-M*i,l=Math.hypot(v,x,h),l?(l=1/l,v*=l,x*=l,h*=l):(v=0,x=0,h=0),r[0]=i,r[1]=v,r[2]=f,r[3]=0,r[4]=t,r[5]=x,r[6]=M,r[7]=0,r[8]=s,r[9]=h,r[10]=p,r[11]=0,r[12]=-(i*g+t*m+s*c),r[13]=-(v*g+x*m+h*c),r[14]=-(f*g+M*m+p*c),r[15]=1,r)}function B1(r,e,n,a){var i=e[0],t=e[1],s=e[2],v=a[0],x=a[1],h=a[2],f=i-n[0],M=t-n[1],p=s-n[2],l=f*f+M*M+p*p;l>0&&(l=1/Math.sqrt(l),f*=l,M*=l,p*=l);var g=x*p-h*M,m=h*f-v*p,c=v*M-x*f;return l=g*g+m*m+c*c,l>0&&(l=1/Math.sqrt(l),g*=l,m*=l,c*=l),r[0]=g,r[1]=m,r[2]=c,r[3]=0,r[4]=M*c-p*m,r[5]=p*g-f*c,r[6]=f*m-M*g,r[7]=0,r[8]=f,r[9]=M,r[10]=p,r[11]=0,r[12]=i,r[13]=t,r[14]=s,r[15]=1,r}function _1(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}function F1(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}function q1(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r[6]=e[6]+n[6],r[7]=e[7]+n[7],r[8]=e[8]+n[8],r[9]=e[9]+n[9],r[10]=e[10]+n[10],r[11]=e[11]+n[11],r[12]=e[12]+n[12],r[13]=e[13]+n[13],r[14]=e[14]+n[14],r[15]=e[15]+n[15],r}function lr(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r[4]=e[4]-n[4],r[5]=e[5]-n[5],r[6]=e[6]-n[6],r[7]=e[7]-n[7],r[8]=e[8]-n[8],r[9]=e[9]-n[9],r[10]=e[10]-n[10],r[11]=e[11]-n[11],r[12]=e[12]-n[12],r[13]=e[13]-n[13],r[14]=e[14]-n[14],r[15]=e[15]-n[15],r}function b1(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r[6]=e[6]*n,r[7]=e[7]*n,r[8]=e[8]*n,r[9]=e[9]*n,r[10]=e[10]*n,r[11]=e[11]*n,r[12]=e[12]*n,r[13]=e[13]*n,r[14]=e[14]*n,r[15]=e[15]*n,r}function D1(r,e,n,a){return r[0]=e[0]+n[0]*a,r[1]=e[1]+n[1]*a,r[2]=e[2]+n[2]*a,r[3]=e[3]+n[3]*a,r[4]=e[4]+n[4]*a,r[5]=e[5]+n[5]*a,r[6]=e[6]+n[6]*a,r[7]=e[7]+n[7]*a,r[8]=e[8]+n[8]*a,r[9]=e[9]+n[9]*a,r[10]=e[10]+n[10]*a,r[11]=e[11]+n[11]*a,r[12]=e[12]+n[12]*a,r[13]=e[13]+n[13]*a,r[14]=e[14]+n[14]*a,r[15]=e[15]+n[15]*a,r}function V1(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]}function C1(r,e){var n=r[0],a=r[1],i=r[2],t=r[3],s=r[4],v=r[5],x=r[6],h=r[7],f=r[8],M=r[9],p=r[10],l=r[11],g=r[12],m=r[13],c=r[14],y=r[15],P=e[0],d=e[1],A=e[2],R=e[3],E=e[4],w=e[5],T=e[6],I=e[7],z=e[8],B=e[9],Y=e[10],N=e[11],S=e[12],F=e[13],D=e[14],V=e[15];return Math.abs(n-P)<=L*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(a-d)<=L*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(i-A)<=L*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(t-R)<=L*Math.max(1,Math.abs(t),Math.abs(R))&&Math.abs(s-E)<=L*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(v-w)<=L*Math.max(1,Math.abs(v),Math.abs(w))&&Math.abs(x-T)<=L*Math.max(1,Math.abs(x),Math.abs(T))&&Math.abs(h-I)<=L*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(f-z)<=L*Math.max(1,Math.abs(f),Math.abs(z))&&Math.abs(M-B)<=L*Math.max(1,Math.abs(M),Math.abs(B))&&Math.abs(p-Y)<=L*Math.max(1,Math.abs(p),Math.abs(Y))&&Math.abs(l-N)<=L*Math.max(1,Math.abs(l),Math.abs(N))&&Math.abs(g-S)<=L*Math.max(1,Math.abs(g),Math.abs(S))&&Math.abs(m-F)<=L*Math.max(1,Math.abs(m),Math.abs(F))&&Math.abs(c-D)<=L*Math.max(1,Math.abs(c),Math.abs(D))&&Math.abs(y-V)<=L*Math.max(1,Math.abs(y),Math.abs(V))}var U1=ir,G1=lr;function k(){var r=new O(3);return O!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function W1(r){var e=r[0],n=r[1],a=r[2];return Math.hypot(e,n,a)}function X(r,e,n){var a=new O(3);return a[0]=r,a[1]=e,a[2]=n,a}function cr(r,e){var n=e[0],a=e[1],i=e[2],t=n*n+a*a+i*i;return t>0&&(t=1/Math.sqrt(t)),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function Mr(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function G(r,e,n){var a=e[0],i=e[1],t=e[2],s=n[0],v=n[1],x=n[2];return r[0]=i*x-t*v,r[1]=t*s-a*x,r[2]=a*v-i*s,r}var pr=W1;var ee=function(){var r=k();return function(e,n,a,i,t,s){var v,x;for(n||(n=3),a||(a=0),i?x=Math.min(i*n+a,e.length):x=e.length,v=a;v<x;v+=n)r[0]=e[v],r[1]=e[v+1],r[2]=e[v+2],t(r,r,s),e[v]=r[0],e[v+1]=r[1],e[v+2]=r[2];return e}}();function H1(){var r=new O(4);return O!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function mr(r,e){var n=e[0],a=e[1],i=e[2],t=e[3],s=n*n+a*a+i*i+t*t;return s>0&&(s=1/Math.sqrt(s)),r[0]=n*s,r[1]=a*s,r[2]=i*s,r[3]=t*s,r}var ne=function(){var r=H1();return function(e,n,a,i,t,s){var v,x;for(n||(n=4),a||(a=0),i?x=Math.min(i*n+a,e.length):x=e.length,v=a;v<x;v+=n)r[0]=e[v],r[1]=e[v+1],r[2]=e[v+2],r[3]=e[v+3],t(r,r,s),e[v]=r[0],e[v+1]=r[1],e[v+2]=r[2],e[v+3]=r[3];return e}}();function Q(){var r=new O(4);return O!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function k1(r,e,n){n=n*.5;var a=Math.sin(n);return r[0]=a*e[0],r[1]=a*e[1],r[2]=a*e[2],r[3]=Math.cos(n),r}function Z(r,e,n,a){var i=e[0],t=e[1],s=e[2],v=e[3],x=n[0],h=n[1],f=n[2],M=n[3],p,l,g,m,c;return l=i*x+t*h+s*f+v*M,l<0&&(l=-l,x=-x,h=-h,f=-f,M=-M),1-l>L?(p=Math.acos(l),g=Math.sin(p),m=Math.sin((1-a)*p)/g,c=Math.sin(a*p)/g):(m=1-a,c=a),r[0]=m*i+c*x,r[1]=m*t+c*h,r[2]=m*s+c*f,r[3]=m*v+c*M,r}function X1(r,e){var n=e[0]+e[4]+e[8],a;if(n>0)a=Math.sqrt(n+1),r[3]=.5*a,a=.5/a,r[0]=(e[5]-e[7])*a,r[1]=(e[6]-e[2])*a,r[2]=(e[1]-e[3])*a;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var t=(i+1)%3,s=(i+2)%3;a=Math.sqrt(e[i*3+i]-e[t*3+t]-e[s*3+s]+1),r[i]=.5*a,a=.5/a,r[3]=(e[t*3+s]-e[s*3+t])*a,r[t]=(e[t*3+i]+e[i*3+t])*a,r[s]=(e[s*3+i]+e[i*3+s])*a}return r}var Ar=mr;var ge=function(){var r=k(),e=X(1,0,0),n=X(0,1,0);return function(a,i,t){var s=Mr(i,t);return s<-.999999?(G(r,e,i),pr(r)<1e-6&&G(r,n,i),cr(r,r),k1(a,r,Math.PI),a):s>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(G(r,i,t),a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=1+s,Ar(a,a))}}(),me=function(){var r=Q(),e=Q();return function(n,a,i,t,s,v){return Z(r,a,s,v),Z(e,i,t,v),Z(n,r,e,2*v*(1-v)),n}}(),ye=function(){var r=W();return function(e,n,a,i){return r[0]=a[0],r[3]=a[1],r[6]=a[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-n[0],r[5]=-n[1],r[8]=-n[2],Ar(e,X1(e,r))}}();function Q1(){var r=new O(2);return O!=Float32Array&&(r[0]=0,r[1]=0),r}var Le=function(){var r=Q1();return function(e,n,a,i,t,s){var v,x;for(n||(n=2),a||(a=0),i?x=Math.min(i*n+a,e.length):x=e.length,v=a;v<x;v+=n)r[0]=e[v],r[1]=e[v+1],t(r,r,s),e[v]=r[0],e[v+1]=r[1];return e}}();var C=class{constructor(e,n){this.canvas=e;this.gl=n;this.trianglePosBuffer_itemSize=3;this.trianglePosBuffer_numItems=24;this.colorBuffer_itemSize=3;this.colorBuffer_numItems=24;this.normalBuffer_itemSize=3;this.normalBuffer_numItems=24;this.render=()=>{let e=[600,200,600],n=[0,0,0],a=[0,1,0],i=_.create();_.fromScaling(i,[50,50,50]),_.rotate(i,i,this.angle2,[1,0,1]),_.rotate(i,i,this.angle1,[0,0,1]);let t=_.create();_.fromTranslation(t,[150,150,0]),_.scale(t,t,[50,50,50]),_.rotate(t,t,this.angle1,[1,0,1]),_.rotate(t,t,this.angle2,[0,0,1]);let s=_.create();_.lookAt(s,e,n,a);let v=_.create();_.perspective(v,Math.PI/4,this.canvas.width/this.canvas.height,10,1e3);let x=_.create(),h=_.create(),f=b.create(),M=b.create(),p=_.create(),l=_.create();_.multiply(x,s,i),b.normalFromMat4(f,x),_.multiply(p,v,x),_.multiply(h,s,t),b.normalFromMat4(M,h),_.multiply(l,v,h),this.gl.clearColor(0,0,0,1),this.gl.enable(this.gl.DEPTH_TEST),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.uniformMatrix4fv(this.MVPmatrix,!1,p),this.gl.uniformMatrix3fv(this.MVNormalmatrix,!1,f),this.gl.uniformMatrix4fv(this.MVmatrix,!1,x),this.gl.uniform1f(this.time,performance.now()*.001),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorBuffer),this.gl.vertexAttribPointer(this.color_attr,this.colorBuffer_itemSize,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.trianglePosBuffer),this.gl.vertexAttribPointer(this.pos_attr,this.trianglePosBuffer_itemSize,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.normalBuffer),this.gl.vertexAttribPointer(this.normal_attr,this.normalBuffer_itemSize,this.gl.FLOAT,!1,0,0),this.gl.drawElements(this.gl.TRIANGLES,U.length,this.gl.UNSIGNED_BYTE,0),this.gl.uniformMatrix4fv(this.MVPmatrix,!1,l),this.gl.uniformMatrix3fv(this.MVNormalmatrix,!1,M),this.gl.uniformMatrix4fv(this.MVmatrix,!1,h),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorBuffer),this.gl.vertexAttribPointer(this.color_attr,this.colorBuffer_itemSize,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.trianglePosBuffer),this.gl.vertexAttribPointer(this.pos_attr,this.trianglePosBuffer_itemSize,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.normalBuffer),this.gl.vertexAttribPointer(this.normal_attr,this.normalBuffer_itemSize,this.gl.FLOAT,!1,0,0),this.gl.drawElements(this.gl.TRIANGLES,U.length,this.gl.UNSIGNED_BYTE,0),this.dataUpdate(),requestAnimationFrame(this.render)};let a=document.getElementById("slider1"),i=document.getElementById("slider2");this.angle1=parseInt(a.value),this.angle2=parseInt(i.value),a.addEventListener("input",t=>{this.angle1=parseFloat(a.value)}),i.addEventListener("input",t=>{this.angle2=parseFloat(i.value)})}init(){this.shader_prog=this.createProgramFromScript("vertexShader","fragShader"),this.gl.useProgram(this.shader_prog),console.info("setting up attrs..."),this.pos_attr=this.gl.getAttribLocation(this.shader_prog,"vPosition"),this.gl.enableVertexAttribArray(this.pos_attr),this.color_attr=this.gl.getAttribLocation(this.shader_prog,"vColor"),this.gl.enableVertexAttribArray(this.color_attr),this.normal_attr=this.gl.getAttribLocation(this.shader_prog,"vNormal"),this.gl.enableVertexAttribArray(this.normal_attr),this.MVPmatrix=this.gl.getUniformLocation(this.shader_prog,"uMVP"),this.MVmatrix=this.gl.getUniformLocation(this.shader_prog,"uMV"),this.MVNormalmatrix=this.gl.getUniformLocation(this.shader_prog,"uMVn"),this.time=this.gl.getUniformLocation(this.shader_prog,"time"),console.info("buffering..."),this.trianglePosBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.trianglePosBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.STATIC_DRAW),this.trianglePosBuffer_itemSize=3,this.trianglePosBuffer_numItems=24,this.colorBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,u,this.gl.STATIC_DRAW),this.colorBuffer_itemSize=3,this.colorBuffer_numItems=24,this.normalBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.normalBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,rr,this.gl.STATIC_DRAW),this.normalBuffer_itemSize=3,this.normalBuffer_numItems=24,this.indexBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,U,this.gl.STATIC_DRAW),console.info("init done")}dataUpdate(){this.angle1=Math.cos(performance.now()*.001),this.angle2=Math.sin(performance.now()*.001)}compileShader(e,n){let a=this.gl.createShader(n);return this.gl.shaderSource(a,e),this.gl.compileShader(a),this.gl.getShaderParameter(a,this.gl.COMPILE_STATUS)||console.error("compiling shader failed: ",this.gl.getShaderInfoLog(a)),a}createProgram(e,n){let a=this.gl.createProgram();return this.gl.attachShader(a,e),this.gl.attachShader(a,n),this.gl.linkProgram(a),this.gl.getProgramParameter(a,this.gl.LINK_STATUS)||console.error("linking error: ",this.gl.getProgramInfoLog(a)),a}createShaderFromScript(e,n){let a=document.getElementById(e).text;return this.compileShader(a,n)}createProgramFromScript(e,n){let a=this.createShaderFromScript(e,this.gl.VERTEX_SHADER),i=this.createShaderFromScript(n,this.gl.FRAGMENT_SHADER);return this.createProgram(a,i)}};var{canvas:J1,gl:K1}=$(),Er=new C(J1,K1);Er.init();Er.render();})();
//# sourceMappingURL=index.js.map
